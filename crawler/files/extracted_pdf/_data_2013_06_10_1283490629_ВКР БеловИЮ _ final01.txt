 

Федеральное государственное автономное образовательное учреждение высшего профессионального образования «Национальный исследовательский университет "Высшая школа экономики"»  Санкт-Петербургский филиал федерального государственного автономного образовательного учреждения высшего профессионального образования «Национальный исследовательский университет "Высшая школа экономики"»   Факультет экономики  Кафедра экономической теории   МАГИСТЕРСКАЯ ДИССЕРТАЦИЯ   на тему: «Агентно-ориентированный подход к моделированию                  пузырей и крахов на виртуальных финансовых рынках»  Направление «Экономика» 080100.68  Программа «Математические методы анализа экономики»    Студент группы № 1121 Белов Игорь Юрьевич   Научный руководитель  к.э.н., доцент кафедры экономической теории Пырлик Владимир Николаевич       Санкт-Петербург 2013 Содержание 

Введение ................................................................................................................... 3 
 
Глава 1. Теоретические основы построения агентно-ориентированной модели 
финансового рынка ................................................................................................. 5 
1.1.  Финансовый рынок как сложная система .............................................. 5 
1.2.  Основные принципы моделирования финансовых рынков и 
искусственных финансовых рынков .................................................................. 6 
1.3.  Подходы к пониманию моделирования пузырей и крахов. ..................... 8 

Глава 2. Предпосылки создания агентно-ориентированной модели 
виртуального финансового рынка ....................................................................... 13 

2.1. Агентно-ориентированный подход в моделировании финансовых 
рынков ................................................................................................................. 13 
2.2. Примеры агентно-ориентированных моделей виртуального 
финансового рынка ........................................................................................... 14 
2.3. Инструменты разработки агентно-ориентированных моделей. Среда 
AnyLogic .............................................................................................................. 18 

Глава 3. Обзор разработанной агентно-ориентированной модели .................. 22 
3.1. Общие положения модели ......................................................................... 22 
3.2. Основные понятия, используемые в модели ............................................ 22 
3.3. Принцип работы регулятора .................................................................... 23 
3.4. Агенты в модели ......................................................................................... 25 
3.5. Описание симуляции модели ..................................................................... 32 
3.6. Параметры разработанной модели ........................................................ 34 
3.7. Основные особенности симуляции и юстировка модели. ..................... 35 

Глава 4. Результаты симуляции модели ............................................................. 41 
4.1. Тестирование разработанной агентно-ориентированной модели ...... 41 
4.2. Обзор и анализ сценариев поведения рынка. Сценарий №1. Рынок, не 
претерпевающий пузырей и крахов. ................................................................ 45 
4.3 Дальнейшая разработка созданной модели ............................................. 52 

Заключение ............................................................................................................ 54 
 
Список используемой литературы ...................................................................... 55 
 
Приложения ........................................................................................................... 57 

Приложение А. Тестирование модели с разными соотношениями 
численности агентов с разной стратегией торговли .................................. 57 

 
 

 

2 

Введение 

Финансовые рынки, несомненно, играют важную роль в экономической 

жизни отдельных людей, крупных и малых компаний, экономик целых стран. 

Для  современных  финансовых  рынков,  даже  в  развитых  экономиках, 

характерны высокая волатильность и резкие переходы в динамике, как цен на 

отдельные  активы,  так  и  обобщающих  рыночных  индексов  и  индикаторов. 

Трудно  предсказуемые  резкие  падения  цен  приводят  к  масштабным 

негативным  последствиям  для  всех  участников  рынка.  Одним  из  наиболее 

актуальных 

и 

современных 

направлений 

исследования 

динамики 

финансовых рынков является теория финансовых пузырей и крахов, в рамках 

этого направления выполнена данная работа. 

В  настоящее  время  активно  развиваются  исследования  в  области 

прогнозирования  пузырей  и  крахов  финансовых  рынков;  в  этих  работах  в 

качестве  причины  рыночных  коллапсов 

выдвигается  прогрессивно 

увеличивающийся  рост  степени  скооперированности  участников  рынка,  за 

которым следует ускорение роста цен и формирование «пузырей»; с большой 

вероятностью заканчивается такое необоснованное повышение цен их резким 

падением — рыночным крахом. 

Большая  часть  исследователей  этих  явлений  на  рынках  работает  в 

рамках  двух  подходов.  Первый  заключается  в  анализе  эмпирики  и  поиске 

численных  методов  предварительного  выявления  и  предсказания  развития 

пузырей.  Другой  подход  основан  на  построении  моделей  искусственных 

рынков  и  выявлению  факторов  поведения  отдельных  участников  рынка, 

рыночной  среды  в  целом  и  даже  экзогенных  по  отношению  к  рынку, 

взаимодействие  которых  может  привести  к  появлению  пузырей  и 

последующих  крахов.  Данное  исследование  выполнено  в  рамках  второго 

подхода. 

Цель  данной  работы  —  построение  имитационной  модели 

искусственного  финансового  рынка  в  рамках  агентно-ориентированного 

 

3 

подхода  для  анализа  взаимодействия  участников  рынка,  следующих 

различным  стратегиям  торговли,  и  возникающих  в  следствие  этого 

различных  тенденций  в  динамике  рынка,  в  особенности  —  крахов, 

завершающих развитие рыночных пузырей.  

В соответствие с целью работы поставлены следующие задачи: 

1.  Выявить  основные  особенности  существующих  подходов  к 

моделированию  искусственных  рынков  посредством  анализа  актуальной 

литературы по теме моделирования искусственных финансовых рынков.. 

2.  На  основе  рассмотренных  существующих  моделей  предположить  и 

составить структуру собственной имитационной модели. 

3. Проанализировать доступные инструменты разработки и реализации 

имитационных 

агентно-ориентированных  моделей.  Выбрать 

среду 

моделирования под цель данной работы. 

4.  Пользуясь  освоенными  инструментами  моделирования,  разработать 

агентно-ориентированную модель искусственного финансового рынка. 

5. Провести экспериментальную работу с моделью, реализуя различные 

паттерны динамики рынка, возникающих как результат начала работы рынка 

с разными значениями базовых параметров модели. 

6.  Проанализировать  работу  модели  в  различных  ситуациях,  сделать 

выводы о возможных закономерностях в возникновении на рынке пузырей и 

крахов. 

Данный  текст  работы  имеет  следующую  структуру.  Первая  глава 

является  обзором  литературы  по  теме  основ  разработки  агентно-

ориентированной модели виртуального финансового рынка. Во второй главе 

представлен  обзор  инструментов  моделирования,  обзор  и 

анализ 

существующих  моделей,  которые  послужили  основой  в  разработки  модели, 

лежащей  в  основе  данного  исследования.  Описание  разработанной  модели 

представлено в Главе 3, а результаты тестирования модели, анализ типичных 

сценариев  и  перспективы  дальнейшей  разработки  данной  модели  описаны  в 

Главе 4. 

 

4 

Глава 1. Теоретические основы построения агентно-
ориентированной модели финансового рынка 

1.1.  Финансовый рынок как сложная система 

Финансовый 

рынок 

является 

очень 

сложным 

трудно 

прогнозированным  механизмом,  сочетающим  в  себе  множество  зависящих 

друг  от  друга  процессов.  Его  можно  рассматривать  с  точки  зрения  теории 

сложных  систем  как  систему  с  экстремальными  или  чрезвычайными 

событиями.  Под  этим  углом  он  представляют  лишь  один  из  возможных 

примеров  среди  множества  других  систем,  показывающих  сложную 

организацию  и  динамику  с  подобным  поведением.  Системы  с  большим 

количеством взаимодействующих частей, часто открыты для окружающей их 

среды и самоорганизовывают свою внутреннюю структуру и свою динамику, 

что 

сопровождается 

часто 

удивительными 

макроскопическими 

проявлениями.  Центральная  особенность  сложных  систем  заключается  в 

возможности  когерентного  и  широкомасштабного  коллективного  поведения  с 

очень  богатой  структурой,  проявляющейся  в  результате  повторяющихся 

нелинейных взаимодействий составляющих её частей: сложная система не является 

линейной суммой составляющих ее компонентов.  

Наиболее  сложные  системы  в  естественных  и  социальных  науках 

демонстрируют редкие и внезапные переходы или экстремальные события, которые 

происходят  через  такие  интервалы  времени,  которые  являются  очень  малыми,  по 

сравнению  с  характерными  масштабами  времени  их  последующей  эволюции. 

Такие чрезвычайные и редкие события больше, чем что-либо другое, обеспечивают 

возможности  для  лучшего  научного  понимания  сложных  систем  и  скрытых 

механизмов, управляющих их динамикой. Эти переходы имеют фундаментальные 

социальные  воздействия  и  варьируют  от  больших  природных  катастроф,  типа 

землетрясений,  вулканических  извержений,  ураганов  и  торнадо,  оползней,  лавин, 

разрядов  молний,  до  сбоев  инженерных  структур,  и  наконец,  до  крушений  на 

 

5 

финансовых  рынках  и  социальных  волнений,  ведущих  к  крупномасштабным 

сдвигам и переворотам. 

В  итоге,  долгосрочное  поведение  сложных  систем  в  значительной  степени 

управляется  экстремальными  событиями  или  резкими  переходами.  Для  сложной 

системы  финансового  рынка  этими  резкими  переходами  являются  крахи.  Поняв 

принцип,  по  которому  крахи  смещают  систему  в  то  или  иное  состояние,  можно 

будет углубить понимание динамики всей системы в целом. 

1.2.  Основные принципы моделирования финансовых рынков и 

искусственных финансовых рынков 

Существует  множество  литературы  по  тематике  моделирования 

финансовых  рынков.  Значительный  прогресс  в  понимании  финансовых 

рынков  был  достигнут  Марковицем  [1],  выдвинувшим  теорию  портфеля  со 

средним отклонением, Шарпом [2], с его моделью оценки основных фондов, 

Линтнером [3], развившим теорию Шарпа, Мертоном, Блэком и Шоулзом [4], 

с  теорией  оценки  опционов  и  хеджирования,  Россом  с  теорией  оценки 

арбитражных  операций,  Коксом,  Ингерзоллем  и  Россом  [5]  с  теорией 

процентной  ставки,  и  это  лишь  наиболее  значительные  вехи  в  развитии 

теории финансовых рынков. 

Экономические  модели  отличаются  от  моделей,  используемых  в 

естественных  науках,  поскольку  экономические  агенты  должны  предвидеть 

будущее.  Решение  каждого  зависит  от  решения  других  (стратегическая 

взаимозависимость) 

и 

ожиданий 

будущего. 

Последовательное 

моделирование  финансовых  рынков  остается  открытой  проблемой.  Чтобы 

добраться  до  сути,  нам  необходим  простой  математический  подход  к 

моделированию рынка.  

Далее будут представлены одни из организующих принципов создания 

финансовых моделей. 

 

6 

1.2.1. Принцип отсутствия арбитражные возможностей 

Одним из таких организующих принципов является условие отсутствия 

арбитражных  возможностей.  Отсутствие  арбитража  подразумевает,  что  два 

актива со сходными характеристиками должны продаваться по одной цене, и 

то  же  касается  этого  же  актива,  продаваемого  на  двух  различных  рынках. 

Если  цены  отличны,  возникает  возможность  получить  прибыль  от  продажи 

данного  актива  там,  где  он  продается  дороже,  и  покупки  там,  где  он 

продается  дешевле.  При  наличии  арбитражной  возможности  цены  не  могут 

оставаться  разными  долго,  или  же  разница  между  ними  должна  быть 

незаметна.  Данное  условие  применяется  как  первостепенное  условие 

приближения  к  реальности.  Существование  транзакционных  издержек  и 

других  несовершенных  явлений  на  рынке  не  должно  использоваться  в 

качестве  оправдания  для  игнорирования  условия  отсутствия  арбитража,  а 

напротив, должно конструктивно привлекаться для изучения его воздействия 

на  модели.  Другими  словами,  такие  несовершенства  рынка  считаются 

второстепенными эффектами [6 — 11].  

1.2.2. Принцип существования рациональных агентов 

Второй важный организующий принцип заключается в рациональности 

инвесторов  и  прочих  экономических  агентов.  Значительная  часть  трейдеров 

большую  часть  времени  ведет  себя  рационально,  то  есть  пытается 

оптимизировать  свою  стратегию,  исходя  из  имеющейся  информации.  Это 

можно  назвать  "ограниченной  рациональностью",  поскольку  имеющаяся  в 

наличии  информация  бывает  неполной,  и  помимо  этого,  трейдеры 

финансового  рынка  также  обладают  ограниченными  возможностями  по 

правильной оценке даже имеющейся информации. Кроме того, инвесторы не 

уверены  в  характере  и  предпочтениях  других  инвесторов  на  рынке.  Это 

значит, что процесс принятия решения по сути своей является "шумным", и, 

как  следствие,  неизбежен  вероятностный  подход  при  моделировании 

фондового рынка из-за отсутствия определенности. На нешумном фондовом 

 

7 

рынке  при  наличии  всей  информации,  где  присутствуют  только  полностью 

рациональные трейдеры безграничных аналитических способностей, уровень 

торгов  был  бы  достаточно  мал,  если  бы  вообще  присутствовал. 

Преобладание  участников  с  иррациональным  поведением  может  привести  к 

"спекулятивным пузырям". 

Рациональность  рынка  следует  понимать  в  том  смысле,  что  цены 

активов  установлены  так,  как  если  бы  все  инвесторы  были  рациональны. 

Рынок  становится  рациональным,  если  на  нем  присутствует  достаточно 

много  разнообразных  агентов,  действующих  исходя  из  ограниченной 

информации.  А  слишком  большая  осведомленность  приводит  к  тому,  что 

инвесторы начинают верить, что они смогут обыграть рынок. Это побуждает 

их  тратить  очень  много  времени  на  исследования  и  заключать  сделки 

слишком быстро на основе имеющейся информации, не покрывая прибылью 

транзакционные  издержки.  Таким  образом,  сверхосведомленность  ведет  к 

расширенному  анализу  скудной  информации,  имеющейся  в  наличии,  и 

встраиванию данной информации в цены бумаг. 

1.3.  Подходы к пониманию моделирования пузырей и крахов. 

В  одной  из  основных  в  области  моделирования  пузырей  и  крахов  на 

рынках  [11]  Сорнетте  отмечает  два  фундаментальных  подхода  к  такому 

моделированию. Они оба опираются на условие отсутствия арбитража, чтобы 

связать  доходы  финансового  рынка  во  время  пузырей  с  риском 

потенциальных  крахов.  Для  моделирования  динамики  цен  используется 

ограниченная 

рациональность.  Обе  модели 

признают 

важными 

сосуществование  и  взаимодействие  между  двумя  различными  группами 

трейдеров: «шумовыми» и рациональными. 

1.3.1. Модель, управляемая риском 

Модель, управляемая риском является расширением модели Бланчарда 

и модели Бланчарда и Уотсона [12, 13]. В данном типе модели возникновение 

пузырей  объясняется  как  самоорганизующийся  процесс  «заражения»  среди 

8 

 

трейдеров, 

ведущий 

к 

равновесным 

ценам, 

отличающимся 

от 

фундаментальной стоимости. Важным свойством данной модели является то, 

что крах не неминуем, и есть определенный шанс, что пузырь не взорвется, а 

сдуется  мягко.  Далее  представлены  два  основных  компонента  из  которых 

состоит модель. 

Если  тенденция  подражания  среди  трейдеров  усиливается  до 

«критической» точки, множество трейдеров могут разместить один и тот же 

приказ  в  одном  направлении,  что  и  вызовет  крах.  При  этом  крах 

недетерминирован, но может характеризоваться коэффициентом угрозы h(t). 

Поскольку  крах  –  не  строго  детерминированный  результат  пузыря,  то 

рациональным  поведением  трейдеров  остается  стратегия  сохранения  своих 

позиций. 

 

Рис. 1. Пример развития пузыря и крах: рынок FOREX, 2007. 

 

 

Модель  различает  два  события:  конец  пузыря  и  крах.  Дата  краха 

обладает  определенной  степенью  случайности  (невозможно  в  пузырях 

рассчитать дату краха с точностью до дня). При этом момент взрыва пузыря 

не обязательно совпадет с датой краха, крах скорее наступит после взрыва – 

9 

 

разладки.  Например,  на  рисунке  1  приведет  график  курса  GBP/JPY 

(отношение  британского  фунта  к  японской  иене),  лето  2007.  Разладка 

состоялась в конце июля, а крах – спустя 2 недели – в середине августа. 

В  каждом  периоде  модель  допускает,  что  2  и  только  2  компонента 

соревнуются  в  борьбе  за  определение  ежедневного  приращения  цены:  во-

первых,  это  ежедневная  рыночная  доходность,  а  во-вторых,  —  вероятность 

краха.  В  таких  условиях  и  при  выполнении  отсутствия  арбитража  и 

рациональности  ожиданиями  изменение  цены,  связанное  с  рыночной 

активностью, должно точно возмещать средние убытки от возможного краха.     

 

Рис. 2. Типичное развитие силы подражания 

 

 

Средние  убытки  оцениваются  путем  рассмотрения  всех  возможных 

сценариев,  большинство  из  которых  естественно  не  содержат  краха.  Доля 

сценариев ведущих к краху естественно ничтожна. Таким образом, рыночное 

приращение  на  временном  горизонте  «сегодня-завтра»  пропорционально 

коэффициенту  риска  краха.  Чем  выше  риск  краха,  тем  больше  приращение 

цены.  Цена  у  зреющего  пузыря  отражает  равновесие  между  жадностью 

покупателей  (которые  надеются  на  дальнейший  рост),  и  страхом  продавцов 

(страх,  что  пузырь  может  лопнуть  в  любой  момент).  Растущий  и  зреющий 

пузырь – это такой пузырь, который уже мог бы лопнуть, но еще не лопнул. 

 

10 

PtВремя, tРазвитие крахаKcPТипичное  развитие  силы  подражания  происходит  следующим 

образом. С  течением  времени  рыночный  индикатор  (цена  актива,  индекс) 

может  пересечь  критический  уровень  Кс,  и  в  этой  фазе  большие  группы 

инвесторов  спонтанно  могут  привести  в  действие  механизм  краха  (см.  рис. 

2).  

1.3.2. Модель, управляемая ценой 

Вторя модель – модель, управляемая ценой [11]. Она также основана на 

взаимодействии  двух  разных  и  взаимодополняющих  друг  с  другом  групп 

трейдеров.  1-я  группа  –  шумовые  или  «стадные»  трейдеры.  Они  своим 

коллективным  поведением  приводят  к  росту  цены  по  ускоряющейся 

траектории,  обеспечивая  тем  самым  возникновение  пузыря.  2-я  группа  – 

рациональные  инвесторы.  Понимая,  что  пузырь  не  подкреплен  фактами, 

«рационалисты» оценивают существование связанного с ним риска краха или 

серьезной коррекции, которая вернет цену к фундаментальной стоимости. В 

данной  модели  долгосрочное  поведение  рынка  состоит  из  ряда  временных 

интервалов, 

перемежающихся 

с 

интервалами 

пузырей, 

которые 

заканчиваются  крахами,  возвращающими  рынок  к  фундаментальной 

стоимости.  Таким  образом,  вероятность  краха  низка  при  незначительных 

отклонениях цены от фундаментальной  стоимости,  но  она  (вероятность)  все 

больше растет по мере роста цены. 

В  отличие  от  модели,  управляемой  риском,  в  модели,  управляемой 

ценой,  скорее  сама  цена  управляет  коэффициентом  риска  краха.  При  этом 

цена  управляется  подражанием  и  стадностью  шумовых  трейдеров.  Как  и 

раньше  динамика  цен  является  стохастической,  в  момент  реализации  краха 

может  характеризоваться  коэффициентом  риска,  определяемым  как 

вероятность  в  единицу  времени  того,  что  крах  произойдет  в  следующий 

момент, если он еще не произошел. 

Если  шумовые  трейдеры  видят,  что  рыночная  цена  растет,  они 

«сбиваются  в  стадо»,  обмениваясь  информацией  и  ожиданиями  друг  с 

 

11 

другом,  и  решают  покупать  еще,  толкая  цены  выше  и  выше.  Логика  здесь 

состоит  в  том,  что  условие  отсутствия  арбитража  совместно  с 

рациональными  ожиданиями  автоматически  подразумевают  значительный 

рост  риска.  А  с  ростом  риска  коэффициент  угрозы  краха  растет 

опережающими  темпами,  поэтому  в  данной  фазе  рынка  в  случае 

продолжения  роста  цены  крах  неминуем  для  возврата  цены  к  ее 

фундаментальной величине. 

Данная  модель  обладает  далеко  идущим  следствием  с  точки  зрения 

повторения и организации крахов во времени. Каждый раз, когда случайные 

блуждания приближаются к выбранной постоянной величине, цена взмывает 

вверх. Согласно условиям отсутствия арбитража совместно с рациональными 

ожиданиями,  это  сигнализирует  о  вхождении  рынка  в  «опасные  воды»  с 

приближающимся крахом. 

Вместе обе эти модели описывают систему двух популяций трейдеров: 

модель, управляемая риском – рациональных, а модель, управляемая ценой – 

шумовых.  Случайное  подражательное  и  стадное  поведение  «шумовых» 

трейдеров  может  привести  к  всеобщей  кооперации  и  вызвать  крах. 

Обе  модели 

заключают  в  себе  понятие,  что  рынок  на  тонком 

самоорганизационном и кооперативном уровне предчувствует крах, оставляя 

предварительные  «отпечатки  пальцев»,  заметные  на  ценах  исследуемого 

актива.  Другими  словами,  подразумевается,  что  рыночные  цены  всегда 

содержат в себе информацию о надвигающихся коллапсах . 

 

12 

Глава 2. Предпосылки создания агентно-ориентированной 
модели виртуального финансового рынка 

2.1. Агентно-ориентированный подход в моделировании 
финансовых рынков 

Вышеописанные  подходы  к  моделированию  финансового  рынка 

рассматривают 

рынок агрегировано, 

не 

объясняя, 

каким 

образом 

складываются  цены.  Тогда  как  в  реальности  процессы  цены  ведут  себя  в 

соответствие  с  образом  поведения  участников  рынка.  Переход  к 

моделированию  на  уровне  отдельных  участников  рынка  (агентов)  —  это  -

ориентированное моделирование. 

 Традиционная  экономическая  теория  описывает  финансовые  рынки 

как  положение  равновесия,  возникшее  у  системы  экономических  агентов, 

которые  действуют  рационально,  опираясь  на  одинаковую  информацию. 

Идея  агентно-ориентированных  моделей  предполагает  кооперацию  агентов 

при  коллективном  решении  задач.  В  многоагентной  системе  агент,  который 

не  способен  решить  некоторую  задачу  самостоятельно,  может  обратиться  к 

другим агентам. 

 Другой  вариант,  когда  необходима  кооперация  –  это  использование 

коллектива  агентов  для  решения  одной  общей  трудной  задачи.  При  этом 

агенты  строят  планы  действий,  основываясь  уже  не  только  на  своих 

возможностях, но и «думают» о планах и намерениях других агентов.  

Использование  идеи  коллективного  поведения  приводит  к  ряду 

проблем 

[14].  Среди  них  следует  выделить  такие  проблемы,  как: 

формирование  совместных  планов  действий,  возможность  учета  интересов 

компаньонов  агента,  синхронизация  совместных  действий,  наличие 

конфликтующих  целей,  наличие  конкуренции  за  совместные  ресурсы, 

организацию  переговоров  о 

совместных  действиях,  распознавание 

необходимости  кооперации,  выбор  подходящего  партнера,  обучение 

 

13 

поведению  в  коллективе,  декомпозиция  задач  и  разделение  обязанностей, 

правила поведения в коллективе, совместные обязательства и т. д. 

2.2. Примеры агентно-ориентированных моделей виртуального 
финансового рынка 

Модели,  описывающие  рынок  с  помощью  большого  числа  агентов, 

называются  агентно-ориентированными  моделями  (agent  based  models).  Так 

как  механизм  финансовых  рынков  сложен  и  недостаточно  изучен,  можно 

лишь 

говорить  об  интерпретации 

систем,  определяемых 

агентно-

ориентированными 

моделями, 

в 

терминах  финансового 

рынка. 

Преимущества  конкретной  модели  определяются  не  похожестью  их  правил 

на реальный механизм (который, вообще можно считать «черным ящиком»), 

а проявлением статистических закономерностей [15].  

В  ходе  работы  было  изучено  множество  различных  существующих 

моделей  [16-20].  Остановимся  на  той,  что  послужила  базисом  в  создании 

новой агентно-ориентированной модели виртуального финансового рынка. 

Модель  Кима  и  Марковица  [20]  разработанная  в  1989  году  считается 

одной  из  первых  современных  агентных  моделей  финансового  рынка. 

Мотивация  для  создания  этой  модели  появилась  после  краха  фондового 

рынка в 1987 году. Основное внимание в исследовании уделялось изучению 

взаимосвязи 

между 

стратегиями 

инвестиционного 

портфеля 

и 

волатильностью рынка.  

Как к плюсам, так и к минусам этой модели Кима и Марковица можно 

отнести  простоту  её  устройства  и  реализации.  На  рынке  имеется  один  тип 

акций, без учёта дивидендов, и всего два типа агентов: «сбалансированные» 

и  портфельные  инвесторы.  В  начальный  момент  времени  каждый  агент 

выходит  на  рынок  с  одинаковым  количеством  богатства.  И  богатство 

каждого  агента  делиться  на  два  типа  активов:  акции  и  наличные  деньги. 

Сбалансированные  инвесторы  стремятся  к  тому,  чтобы  половина  их 

 

14 

богатства  находилась  в  акциях,  а  другая  половина  в  наличных  деньгах,  то 

есть, чтобы выполнялось соотношения: 

. (см. пункт 1.6.1.) 

Портфельные  инвесторы  используют  CPPI  метод  Черно-Джонса  - 

постоянное соотношение инвестиционного портфеля: 

 (см. пункт 1.6.1.), где 

  —  постоянная  доля  инвестиционного  портфеля,  f  –  доля  богатства, 

которая находиться в акциях.  

Каждый  агент,  выходя  на  рынок,  оценивает  следующие  величины: 

спрос, предложение, и доли активов своего богатства. Оценив эти величины, 

агент  выбирает,  покупать  ли  ему  акцию  или  продавать  и  по  какой  цене. 

Стоимость  акций  меняется  в  зависимости  от  спроса  и  предложения. 

Разберём,  как  модель  работает  технически.  Рынок  состоит  из  запросов 

агентов  на  покупку  (ask)  и  продажу  (bid)  акций  по  той  или  иной  цене  p. 

Далее,  агенты  с  определённой  вероятностью  приходят  на  рынок,  имея 

следующие варианты действий (см. рис. 3): 

1.  Если  рынок  целиком  состоит  из  спроса,  то  есть  из  запросов  (ордеров) 

на  покупку  акций  (asks).  То  агент  так  же  оставляет  свой  запрос  на 

покупку  ask  по  цене,  которая  будет  на  1%  выше,  чем  цена  самого 

дорого из запросов на покупку

. 

2.  Если  рынок  целиком  состоит  из  предложения,  то  есть  из  запросов  на 

продажу  акций  (bids).  То  агент  так  же  оставляет  свой  запрос  на 

продажу  bid  по  цене,  которая  будет  на  1%  ниже,  чем  цена  самого 

дешёвого из запросов на продажу 

. 

 

15 

3.  Если рынок состоит как из asks, так и из bids, то агент в первую очередь 

смотрит  на  соотношение  и  количества.  Если  перевешивают  asks,  то 

агент тоже выбирает asks и на оборот, если bids > asks, то агент также 

asks.  Цена  же  на  ордер  высчитывается  как  половина  суммы  самого 

дорогого спроса и самого низкого предложения.  

 

4.  Если на рынке нет ни спроса, ни предложения, то агент исходя из своей 

основной  стратегии,  в  зависимости  от  того  какого  он  типа 

(сбалансированный  или  портфельный  инвестор),  оставляет  свой  ордер 

на  куплю  или  продажу  по  той  цене,  по  который  он  осуществлял  свой 

ордер в предыдущий период. 

 

5.  Наконец,  самое 

главное  условие:  агент  выполняет  одно  из 

вышеперечисленных  действий  только  в  том  случае,  если  это 

способствует 

выполнению 

его 

основной 

цели.  Если 

это 

сбалансированный  агент,  то  он  должен  стремиться  к  тому,  чтобы 

половина  его  богатства  содержалась  в  наличных  деньгах,  а  вторая 

половина в акциях. Если окажется так, что у сбалансированного агента 

 

, то он не будет выполнять первое действие, даже если рынок будет 

состоять из одних asks, потому что это противоречит его основной 

стратегии. Аналогично действуют портфельные инвесторы. В первую 

очередь они исходят из выполнения их основной задачи. 

Проанализировав 

данную 

модель 

можно 

заметить, 

что 

сбалансированные агенты не сильно отличаются от портфельных инвесторов. 

Если портфельному инвестору задать 

 и k =1, то  

, 

 

16 

то  он  будет  стремиться  к  тому,  чтобы  половина  его  богатства 

содержалась  в  акциях,  следовательно,  вторая  половина  в  наличных  деньгах. 

Таким  образом,  портфельный  инвестор  превратиться  в  сбалансированного 

агента и на рынке останется лишь один тип агентов.  

При  реализации  модели  Кима  и  Марковица  задаётся  фиксированное 

количество 

агентов  и  их  богатств, 

а 

также  фиксируется  доля 

сбалансированных  агентов  и  портфельных  инвесторов.  Отсюда  следует,  что 

только  параметры  доля  богатства  f  и  постоянная  доля  инвестиционного 

портфеля  k  могут  влиять  на  динамику  всей  системы  в  целом. 

Сбалансированные  агенты,  следуя  своей  основной  стратегии,  регулярно 

вызывают  невысокую  волатильность  цен  на  рынке.  В  большом  временном 

масштабе  индекс  рыночных  цен  будет  зависеть  в  основном  от  доли 

портфельных инвесторов на рынке и от их инвестиционного портфеля, т.е. от 

параметров f и k.  

В  итоги  можно  прийти  к  выводу,  что  сбалансированные  агенты 

являются  всего  лишь  потребительской  массой  на  финансовом  рынке.  А 

возникновение  финансовых  пузырей  и  последующих  крахов,  может  быть 

спровоцировано  лишь  значительной  долей  портфельных  инвесторов  на 

рынке  и  их  губительной  выбранной  стратегией.  Стоит  учесть,  что  в  модели 

задаётся  одно  и  то  же  значение  f  и  k  для  всех  портфельных  инвесторов,  а 

значит,  что  все  портфельные  инвесторов  действуют  кооперативно  или 

подражательно. 

Основная  концепция  разрабатываемой  в  данной  работе  агентно-

ориентированной  модели  искусственного  рынка,  базируется  на  моделях 

управляемой  риском  и  управляемой  ценой.  Предполагается,  что  модель 

должна  иметь  в  наличии,  как  минимум,  два  типа  агентов:  «шумовых»  или 

«стадных»  и  рациональных  трейдеров.  Финансовый  пузырь  и  последующий 

крах  обуславливаются  кооперативным  поведением  участников  рынка.  К 

такому  поведению  склоны  шумовые  трейдеры,  которые  имеют  свойства 

подражать своему окружению.  

 

17 

Если из модели Кима и Марковица убрать основные стратегии агентов, 

заключающиеся в стремлении держать своё богатство в строгих пропорциях, 

часть в акциях, часть в деньгах, то они будут иметь все свойства «стадных» 

трейдеров и принадлежать одному  типу  агентов.  Действительно, вернёмся к 

действиям агентов в модели Кима и Марковича и уберём пятый пункт. Агент, 

приходя  на  рынок,  следит  за  количеством  asks  и  bids.  Он  следует  за 

большинством, подражает ему. Если большая часть трейдеров хочет продать 

акции  (bids  >  asks),  агент  оставляет  свой  ордер  на  продажу,  выбрав  цену 

немного  ниже  самой  низкой  цены  среди  имеющихся  bids.  Таким  образом, 

агент  обеспечивает себе  гарантию, что его акцию будут   покупать  в первую 

очередь. Аналогично в случае, когда  asks > bids, только в этом случае агент 

завышает цену на свой ask.  

Именно  такое  поведение  агентов  послужило  основой  для  создания 

шумовых  агентов  в  разрабатываемой  модели.  Не  остались  без  внимания  и 

портфельные  страховщики,  которые  в  своей  интерпретации  были 

реализованы в разработанной модели. Был так же создан третий тип агентов 

под  названием  «рациональные».  Их  механизм  принцип  поведения  подобен 

шумовым агентам. 

В  разработанной  модели  искусственный  рынок  можно  сравнить  с 

огромным  механизмом,  который  непрестанно  проводит  голосование  среди 

агентов.  Голоса  скапливаются  в  списки,  которые  регулярно  обновляются,  и 

меняют значение текущей цены. В свете работы такой системы, «инвесторы-

одиночки»  верят  в  справедливость  текущей  цены.  Таким  образом, 

финансовый  пузырь  может  пройти,  как  это  почти  всегда  происходит,  мимо 

глаз общественности.  

2.3. Инструменты разработки агентно-ориентированных моделей. 
Среда AnyLogic 

В  настоящее  время  моделирование  составляет  неотъемлемую  часть 

современной  фундаментальной  и  прикладной  науки.  Существует множество 

 

18 

пакетов  прикладных  программ  для  математических  и  научных  расчётов, 

ориентированных  на  широкие  круги  пользователей.  К  таким  пакетам 

относятся  Agnes,  VisSim,  Arena,  AnyLogic,  NetLogo,  StarLogo  и  другие.  Три 

последние  перечисленные  нами  программы  являются  самыми  популярными 

для разработки и создания агентно-ориентированных моделей.  

В данной же работе в качестве программного обеспечения был выбран 

Anylogic,  разработанный  российской  компанией  «Экс  Джей  Текнолоджис». 

Этот  инструмент  обладает  современным  графическим  интерфейсом  и 

позволяет использовать язык java для разработки моделей. 

AnyLogic  -  единственный  инструмент  имитационного  моделирования 

(ИМ),  который  поддерживает  все  подходы  к  созданию  имитационных 

моделей:   дискретно-событийный,  системно-динамический  и  агентный,  а 

также любую их комбинацию [21].  

Уникальность, 

гибкость 

и  мощность 

языка  моделирования, 

предоставляемого  AnyLogic,  позволяет  учесть  любой  аспект  моделируемой 

системы  с  любым  уровнем  детализации.  Графический  интерфейс  AnyLogic, 

инструменты и библиотеки позволяют быстро создавать модели для широко 

спектра  задач  от  моделирования  производства,  логистики,  бизнес-процессов 

до стратегических моделей развития компании и рынков.  

Anylogic  поддерживает  как  дискретный,  так  и  непрерывный  подход  в 

пределах  одной  модели,  включает  в  себя  возможность  создания 

интерактивной  анимации  для  улучшения  наглядности  моделей.  Так  же 

Anylogic имеет  богатый выбор функций  распределения, позволяет создавать 

сложные  стохастические  модели,  включает  в  себя  низкоуровневые 

конструкции моделирования (переменные, уравнения, параметры, события и 

т.п), формы представления (линии, квадраты, овалы и т.п), элементы анализа 

(базы  данных,  гистограммы,  графики),  стандартные  картинки  и  формы 

экспериментов. 

Среда  моделирования  AnyLogic  поддерживает  проектирование, 

разработку, 

документирование  модели, 

выполнение 

компьютерных 

 

19 

экспериментов  с  моделью,  включая  различные  виды  анализа —  от  анализа 

чувствительности  до  оптимизации  параметров  модели  относительно 

некоторого  критерия.  Внутри  среды  используется  язык  программирования 

Java.  

Таким  образом  AnyLogic  включает  в  себя  графический  язык 

моделирования,  а  также  позволяет  пользователю  расширять  созданные 

модели с помощью языка java. 

Характеристика языка программирования Java для разработки агентно-

ориентированных моделей. Java, вероятно, — один из наиболее популярных 

языков используемых в последнее время для программирования агентов. Java 

представляет из себя язык программирования, подобный C++ по синтаксису, 

но  более  схожий  со  Smalltalk  и  Objective  C  по  идеологии.  Система 

программирования  на  Java  включает  в  себя  виртуальную  машину  Java  и 

транслятор с Java в bytecode. 

Язык  Java  предусматривает  создание  приложений,  переносимых  на 

различные  платформы.  Программа,  написанная  на  Java,  компилируется  в 

специальный  машинно-независий  байт-код.  Затем  этот  код  может  быть 

исполнен  с  помощью  интерпретатора  Java  на  любом  компьютере,  где 

реализована  Java  Virtual  Machine.  Тем  самым  обеспечивается  платформо-

независимость  Java  -  приложений  на  уровне  байт-кода,  который  может 

приходить  откуда  угодно,  включая  Web-страницу,  в  которой  содержится 

ссылка  на  него.  Java  Virtual  Machine  работает  в  среде  вытесняющей 

мультизадачности и поддерживает облегченные процессы (threads). Средства 

создания  и  синхронизации  таких  процессов  включены  в  Java  на  уровне 

языковых конструкций и классов. Средства многозадачности также призваны 

обеспечить  реакцию  системы  в  реальном  времени  для  мультимедийных 

приложений, критичных ко времени [15]. 

Java  представляет  собой  истинно  объектно-ориентированный  язык 

программирования  с  сильной  типизацией.  Схожесть  с  С++  делает  его 

простым для  изучения программистами. В  нем отсутствует предельно  ясное 

 

20 

распределение  памяти  и  для  повышения  надежности  программ  из  языка 

исключена  арифметика  указателей.  Каждый  тип  данных  понимается  как 

класс  объектов,  любая  функция  является  методом  класса.  Ее  вызов 

рассматривается  с  объектно-ориентированных  позиций  как  посылка 

сообщения  объекту.  Имеется  встроенная  расширяемая  библиотека  классов, 

включающая Abstract Window Toolkit (AWT) для создания пользовательских 

интерфейсов,  классы  поддержки  основных  типов  данных,  threads,  сетевых 

возможностей,  графики,  мультимедиа,  и  т.  д.  К  средствам  повышения 

надежности  следует  отнести  встроенную  в  язык  обработку  исключительных 

ситуаций (exceptions) и run-time контроль за выполнением программы, такой, 

как проверка выхода за границы массивов и т.д. [21] 

 

21 

Глава 3. Обзор разработанной агентно-ориентированной модели 

3.1. Общие положения модели 

В  настоящей  модели  рассматривается  виртуальный  вторичный 

финансовый  рынок,  который  состоит  из  некого  количества  агентов  N. 

Каждый  агент,  в  зависимости  от  своего  поведения  (стратегии)  делиться  на 

один  из  трёх  типов  трейдеров:  шумовых,  рациональных  и  портфельных 

инвесторов.  Доля  того  или  иного  типа  агентов  на  рынке  задаётся 

вероятностным  соотношением  перед  запуском  модели.  Каждый  агент 

выходит  на  рынок  с  определённым  вероятностно  заданным  количеством 

денежных  средств  (initCash)    и  объёмом  акция  (initVolume).  Далее,  следуя 

своим  стратегиям,  агенты  оставляют  свои  ордера  в  регуляторе  (Regulator). 

Желание  агента  оставить  свой  ордер  в  регуляторе,  также  является 

программированным  вероятностным  процессом.  Каждый  агент  запоминает 

стоимость  последней  проведенной  своей  сделки.  Это  знание  является 

элементом  некоторых  стратегий.  Агент  имеет  право  оставить  только  один 

ордер в регуляторе на ask или bid (куплю или продажу) одной акции. Каждый 

ордер имеет  заданное  время  провисания  в регуляторе. После  чего регулятор 

удаляет устаревший ордер, обновляя список коллекций asks и bids. 

Непосредственно  с  программным  кодом  разработанной  модели  можно 

ознакомиться в приложении. Код был сгенерирован при помощи java-аплета, 

встроенного в компьютерную среду Anylogic. 

3.2. Основные понятия, используемые в модели 

На протяжении всей данной работы вводятся понятия, смысл которых, 

даётся  из  контекста.  К  таким  понятиям  можно  отнести:  ордер,  ask,  bid, 

регулятор,  стратегия  агента  и  рыночная  цена.  Разберём  их  более  глубоко  и 

детально для дальнейшего понимания устройства модели: 

1.  Ask – ордер на покупку актива с заданной ценой. 

2.  Bid – ордер на продажу актива с заданной ценой. 

 

22 

3.  Ордер  –  запрос  на  куплю  (ask)  или  продажу  (bid)  актива  с 

заданной ценой, отправляемый в регулятор. В разработанной модели каждый 

агент  может  оставить  один  единственный  ордер  в  регуляторе,  торгуя 

единичным  объёмом  акций.  Агенты,  следуя  своим  стратегиям,  в  первую 

очередь формируют тип ордера, а потом его цену. 

4.  Регулятор 

– 

устройство, 

которое 

следит 

за  набором, 

отправленных ордеров, и за его обработкой. 

5.  Стратегия  агента  –  набор  действий,  которые  может  выполнять 

агент,  ведущий  к  созданию  ордера.  Стратегия  агента  зависит  от  его  типа.  В 

разработанной  модели  каждая  стратегия  агентов    реализована  в  виде 

функции, которая определяет тип ордера и его стоимость.  

6.  Рыночная цена – среднерыночная стоимость актива. 

3.3. Принцип работы регулятора 

Регулятор  как  раз  и  является  тем  механизмом,  который  проводит 

голосование  между  агентами  и  следит  за  ним.  Регулятор  задаёт 

определённую  вероятность  каждому  агенту  на  создание  ордера.  Вследствие 

такой  работы  в  регуляторе  образуются  две  коллекции  ордеров,  которые 

представляют собой очередь на куплю (asks) и продажу (bids). Часть ордеров 

удовлетворяются  встречными  предложениями  (ордерами), с  более  выгодной 

или  равной  ценой.  Ордер  каждого  агента  живёт  4  единицы  модельного 

времени.  Поэтому  остальная  часть  ордеров,  которая  не  была  удовлетворена 

встречным  предложением  в  течение  этого  времени,  будет  удалена 

регулятором.  Удаляя  ордера,  регулятор  оповещает  об  этом  их  владельцев. 

Далее, всё следует по вышесказанному алгоритму.  

Важной особенностью является то, что регулятор сортирует коллекции 

ордеров  на  куплю  (asks)  и  продажу  (bids)  по  их  стоимости.  Делает  он  это 

таким образом, чтобы коллекция asks сортировалась от самых высоких цен  к 

самым  низким,  а  коллекция  bids  от  самых  низких  цен  к  самым  высоким.  В 

результате  такой  сортировки  на  первых  местах  в  обеих  коллекция  стоят 

 

23 

самые выгодные ордера. Поэтому когда агент приходит на рынок с желанием 

купить  актив,  он  будет  смотреть  на  самое  первое  предложение  из  всего, 

предложенного  регулятором,  списка  bids.  Если  это  предложение  его 

устраивает,  то  он  делает  покупку.  Если  не  устраивает,  то  остальные  тем 

более не устроят. Аналогичная ситуация происходит когда агент приходит с 

желанием продать актив. 

Регулятор  также  заносит  в  отдельный  список  (массив)  информацию  о 

стоимости  каждого  удовлетворённого  ордера.  И  через  каждые  две  единицы 

модельного  времени  он  высчитывает  среднее  арифметическое  значение 

элементов  этого  массива.  Это  значение  есть  рыночная  цена  актива,  которая 

каждые  две  единицы  модельного  времени  обновляется  и  записывается  в 

отдельный архив.  

При  запуске  модели,  регулятор  начинает  создавать  статистику. 

Каждому  модельному  моменту  времени  соответствует  своя  рыночная  цена, 

количество  ордеров  в  очереди  и  количество  совершаемых  сделок.  Вся  эта 

информация  образует  вышеупомянутую  статистику.  При  запуске  модели 

Регулятор  выводит  на  экран  график,  где  интерактивно  отображается 

рыночная  цены,  количество  совершаемых  сделок  и  количество  ордеров  в 

очереди.  В  любой  момент  времени  модель  можно  приостановить  и 

наблюдать  статистику  совершённых  сделок  детально,  где  будет  точно 

описано,  в  какое  время  какой  агент  реализовал  тот  или  иной  ордер.  Также 

можно  посмотреть  количество  актива  любого  агента  в  прошедшие 

промежутки времени. 

На первичном рынке агенты торгуют друг с другом напрямую, так что 

цена  сделки  зависит  от  их  личных  переговоров.  Биржа  фиксирует  лишь 

стоимость сделки. На вторичном рынке работу по разработке правил торгов, 

условий  предоставления  брокерских  услуг  и  решению  конфликтных 

ситуаций проводит регулятор. В реальной жизни, например в США, функции 

регулятора валютного рынка выполняет «Комиссия по фьючерсной торговле 

товарами».  На  отечественных  «Форекс  просторах»  не  существует 

 

24 

официального  регулирующего  устройства.  Максимально  близка  по  своей 

сути  и  компетенции  к  данному  механизму  стоит  Федеральная  служба  по 

финансовым рынкам.  

3.4. Агенты в модели 

3.4.1. Типы агентов 

В  модели  используются  три  типа  агентов:  шумовые  (стадные), 

рациональные  и  портфельные  инвесторы.  Тип  агента  определяется  его 

стратегией.  В  реальной  жизни  представители  разных  типов  инвесторов 

преследуют  различные  тактические  цели,  а  также  применяют  различные 

техники  принятия  решений  о  покупке-продаже  бумаг.  Разные  типы 

инвесторов  имеют  свои  жаргонные  прозвища,  такие  как  скальперы,  дэй-

трейдеры,  overnight-спекулянты  и  свинг-трейдеры.  Тем  не  менее  трейдеры 

всегда следуют какой то устоявшейся своей системе торгов. Часто случается 

так,  что  трейдеры  смотрят  за  работой  своих  успешных  коллег  и    пытаются 

повторить  их  успех.  Это  может  привести  к  стадному  поведению  даже 

профессионалов игроков. 

3.4.2. Шумовые или стадные агенты 

Как уже упоминалось выше шумовые или стадные агенты имеют такое 

прозвище из-за своих свойств подражать большинству. Концепция стадности 

и  подражания  подразумевает,  что  субъекты  имеют  склонность  перенимать 

точки  зрения  своих  «соседей»,  а  не  противоречить  им.  Иногда  такая 

стратегия бывает в достаточной степени оправдана. Например, при нехватке 

информации  «подражание  может  быть  оптимальным  выбором».  В  реальной 

жизни  все трейдеры  в мире объединены  в сообщества,  состоящие  из членов 

семьи,  друзей,  коллег  по  работе,  знакомых  и  других  источников  мнений, 

влияющих  друг  на  друга  в  пределах  такого  сообщества  или  сети.  К 

источникам  влияния  можно  отнести  газеты,  интернет-сайты,  телевизионные 

 

25 

каналы  и  другие  средства  информации.  Даже  профессиональные  трейдеры 

могут заразиться мнением своего авторитетного окружения. 

В  разработанной  модели  шумовые  агенты  обладают  абсолютно 

«стадным  поведением».  Они  слепо  следуют  за  большинством,  раскачивая 

рыночную  цену  актива.  Стоит  цене  актива  отклониться  от  фундаментально 

своего значения в сторону, как шумовые агенты придают этому отклонению 

резонанс.  Поэтому  именно  агенты  обладающие  таким  типом  поведения  в 

первую  очередь  подозреваются  в  раздутиях  финансовых  пузырей  и  в 

последующих крахах.  

Алгоритм поведения шумовых агентов: 

 – ордер на покупку в момент времени t 

 – ордер на продажу в момент времени t 

 

Когда  наступает  очередь  шумового  агента  создать  ордер,  он 

обращается  к  регулятору  и  высматривает  скопившиеся  в  нём  ордера  на 

куплю  и  продажу.  В  случае,  когда  оставленных  ордеров  в  регуляторе  на 

куплю  больше  чем  на  продажу  (asks  >  bids),  шумовой  агент  начинает 

имитировать большинство и оставляет свой ордер на покупку. Аналогично, в 

случае,  когда  предложений  на  продажу  активов  в  регуляторе  больше  чем 

предложений на его покупку (bids > asks), шумовой агент присваивает своему 

ордеру  параметр  bids.  Возможна  ситуация,  когда  на  рынке  спрос  равен 

предложению,  то  есть  количество  ордеров  на  куплю  в  регуляторе  равно 

количеству  ордеров  на  продажу  (asks  =  bids).  При  таких  обстоятельствах 

шумовой  агент  не  находит  ничего  лучшего  чем  «подкинуть  монетку 

поддаться  воле  случая».  Он  с  пятидесяти  процентной  вероятностью  создаёт 

ордер на покупку или продажу.  

 

26 

Вторым этапом создания ордера является выбор его стоимости. Любой 

трейдер  заинтересован  в  удовлетворении  своего  ордера.  Ордер  шумового 

агента  должен  быть  привлекателен  для  остальных.  Поэтому,  если  шумовой 

агент решил приобрести акцию, он должен осмотреть подобные, имеющиеся 

в  регуляторе,  ордера  на  покупку.  Далее,  найдя  предложение  на  покупку  по 

самой высокой цене, он оставляет свой ask с ценой на 1% выше найденного, 

тем  самым  увеличивая  вероятность  в  удовлетворении  своего  ордера.  Стоит 

вспомнить,  что  регулятор  предоставляет  отсортированный  массив  asks  по 

ценам,  поэтому  шумовому  агенту  достаточно  взглянуть  только  на  первый 

элемент,  далее,  увеличив  цену  на  свой  ask,  он  сам  занимает  первое  место  в 

этом  массиве.  Происходит  аналогичный  процесс,  когда  шумовой  трейдер 

приходит  с  решением  продать  свой  актив.  Он  оставляет  свой  ордер  на 

продажу,  выставляя  цену  на  1%  ниже, цены  первого  элемента  списка  bids  и 

сам  встает  на  первое  место  в  этом  списке.  Тем  самым  он  добивается 

привлекательности своего предложения для желающих покупателей.  

Если на рынке большее количество участников заинтересовано в купле, 

то шумовой трейдер, заражённый стадным поведением, тоже будет покупать. 

Если  на  рынке  преобладает  желание  продавать,  то  шумовой  трейдер  будет 

выставлять  ордер  на  продажу.  Но  может  произойти  ситуация,  когда  все 

ордера  будут  удовлетворены  и  на  рынке  не  останется  ни  спроса,  ни 

предложения.  Шумовой  агент  находиться  в  «растерянном  состоянии»,  ему 

некому  подражать.  Он  считает,  что  самым  разумным  выходом  в  такой 

ситуации  есть  ожидание  действий  со  стороны  других  агентов.  Он  не 

совершает  никаких  действий,  пока  не  появятся  ордера  от  других  агентов. 

Точно  также  шумовой  агент    переходит  в  режим  ожидания,  когда  у  него  не 

хватает  денег  на  приобретения  акции,  а  его  подражательная  природа 

призывает к покупке. Режим ожидания включается и при случае, когда агент 

нацелен  на  продажу,  не  имея  на  руках  акций.  В  обоих  случаях  агент  ждёт 

изменение  ситуаций  на  рынке,  при  которых  его  стратегия  будет  возможна 

для создания ордера.  

 

27 

3.4.3. Рациональные агенты 

Агенты,  называемые  в  разработанной  модели  рациональными, 

стремятся к максимизации своего богатства: 

, 

Где 

-  богатство  агента  в  момент  времени  t, 

-  количество  акция 

агента на момент времени t, 

- рыночная цена акции в момент времени t, 

- 

наличные деньги агента в момент времени t.  

Выше  уже  излагалась,  что  к  стадному  поведению  склонны  даже 

блестящие  профессионалы  среди  трейдеров.  Именно  такой  контингент 

агентов был реализован в модели. Поэтому, стратегия рациональных агентов 

схожа  со  стратегией  шумовых.  Рациональные  агенты  точно  также  как  и 

шумовые,  в  виду  своих  подражательных  свойств,  влияют  на  резкое 

изменение  рыночной  цены.  То  есть  являются  виновниками  финансовых 

пузырей.  Когда  рыночная  цена  отклоняется  от  своего  фундаментального 

значения  рациональные  трейдеры  «подливают  жар  в  огонь»  и  делают  это 

приращение  ещё  больше.  В  реальной  жизни  такое  поведение  рациональных 

агентов,  профессиональных  трейдеров  можно  обосновать  тем,  что  на 

финансовом  пузыре  всегда  можно  подзаработать,  если  успеть  избавиться  от 

своих активов до обрушения цен. 

Алгоритм поведения рациональных агентов: 

Где 

  –  ордер  на  покупку  в  момент  времени  t, 

  –  ордер  на 

продажу в момент времени t, marketPrice –рыночная цена актива. 

Рациональные агенты наблюдают за динамикой рыночной цены актива, 

статистика  которой  храниться  в  регуляторе.  Создавая  ордер,  рациональный 

 

 

28 

агент  определяет  его  тип,  будет  ли  это  ордер  на  продажу  или  на  покупку, 

после  агент  сравнивает  последнее  и  предпоследнее  значения  в  массиве 

рыночных  цен  актива.  Если  предпоследнее  значение  меньше  последнего,  то 

агент желает совершить покупку и создает соответствующий. Если значение 

предпоследнего  элемента  больше  значения  последнего,  то  агент  желает 

совершить  продажу  и  создает  соответствующий  ордер.  В  случае,  когда 

предпоследние значение рыночной цены актива равно последнему значению, 

агент, с пятидесяти процентной вероятностью, создает ордер на покупку или 

продажу.  

Рациональный  агент  смотрит  массивы  asks  и  bids  в  регуляторе.  Если 

количество запросов на покупку превышает количество запросов на продажу 

(asks  >  bids),  то  агент  имитирует  поведение  большинства  и  оставляет  ордер 

на  покупку.  Если  же  количество  bids  превышает  asks,  то  агент  оставляет 

ордер  на  продажу.  Далее,  ему  остаётся  назначить  стоимость  своего  ордера. 

Если агент формирует ордер на продажу, то он смотрит на первый элемент из 

массива  bids.  Напомним,  что  регулятор  сортирует  массивы  bids  и  asks  по 

цене так, что первый элемент из массива bids имеет самую низкую цену. Для 

того  чтобы  создать  самое  привлекательно  предложение  на  продажу,  агент 

устанавливает цену своего ордера на 1% ниже цены этого первого элемента и 

сам  встаёт  на  первое  место  в  списке  продаж.  Если  же  на  момент  создания 

ордера  рациональным  агентом  в  регуляторе  не  будет  находить  ни  одного 

ордера  на  продажу,  то  агент  устанавливает  текущую  рыночную  стоимость 

актива  на  свой  ордер.  Если  агент  формирует  цену  ордера  на  покупку,  то  он 

устанавливает  на  него  цену  на  1%  выше  цены  самого  дорого  ордера  на 

покупку  из  имеющихся  в  списке  ордеров  в  регуляторе.  Тем  самым 

увеличивается  вероятность, что  его ордер  будет удовлетворён. Ордер  встаёт 

на первое  место  в массиве  asks. В ситуации, когда рыночная цена  актива  не 

меняется (значение в момент времени t-1 равно значению в момент времени 

t)  агент  с  пятидесяти  процентной  вероятностью  совершает  куплю  или 

продажу.  Если  массив  asks  окажется  пустым,  то  агент  устанавливает 

 

29 

рыночную  стоимость  актива  на  свой  ордер.  Если  у  агента  не  хватает 

наличных  денег  для  создания  ордера,  он  подобно  шумовым  агентом 

переходит  в  режим  ожидания.  Тоже  происходит,  когда  у  агента  не  имеется 

активов  для  создания  ордера  на  продажу.  Агент  будет  ожидать  рыночных 

изменений, той ситуации, при которой он сможет действовать. 

3.4.4. Портфельные инвесторы 

Портфельный  инвестор  заинтересован  в  получении  максимальной 

прибыли  от  своих  активов  (от  ценных  бумаг).  Приобретая  ценные  бумаги, 

портфельный  инвестор  заинтересован  в  том,  чтобы  эти  бумаги  приносили 

дивиденды  и  постоянно  росли  в  своей  стоимости,  то  есть  основная  цель 

такого  агента  заключается  в  получении  гарантированного  стабильного 

дохода  при  минимальном  риске  вложений  или,  говоря  другими  словами, 

собрать  оптимальный  инвестиционный  портфель.  Часть  своего  богатства  он 

вынужден  держать  в  наличных  деньгах,  в  виду  того  факта,  что  ситуация  на 

рынке  постоянно  меняется  и  требуется  постоянно  обновлять  свои  активы, 

избавляясь от одних, приобретая другие. 

В  разработанную  модель  не  включаются  ни  дивиденды,  ни  различные 

типы  акций,  поэтому  основная  задача  портфельного  инвестора  сводится  к 

распределению  своего  богатства  на  активы  и  наличные  деньги.  То  есть  он 

должен  постоянно  поддерживать  заданную  пропорцию  стоимости  активов  к 

наличным  деньгам.  Агентов  с  таким  поведением  совершенно  не  заботит 

мнение  других  игроков,  они  не  подвержены  стадному  поведению  и  не 

прислушиваются к слухам. Им совершенно всё равно, какой на рынке спрос 

и какое предложения, их заботит исключительно рыночная цена их активов. 

Они стремятся к тому, чтобы выполнялось следующее соотношение: 

, 

Где 

  -  количество  акций  в  момент  времени  t, 

  -  рыночная 

цена актива в момент времени t, 

 - наличные деньги в момент времени t. 

 

30 

Изменяя 

коэффициент  пропорциональности 

const, 

изменяется 

стратегия  портфельного  инвестора.  В  реализации  настоящей  модели 

коэффициент  const  равен  1.  Это  означает  то,  что  агент  стремиться  держать 

половину  своего  богатства  в  активах,  а  другую  половину  в  наличных 

деньгах. 

Алгоритм поведения портфельного инвестора: 

 

Рыночная цена актива в ходе совершения сделок непрестанно меняется. 

Поэтому портфельному инвестору требуется постоянно формировать ордера 

для решения своей основной задачи. В каждый момент модельного времени 

портфельный  инвестор  следит  за  рыночной  ценой.  Получая  право 

регулятором на  создание ордера, агент  взвешивает стоимость  своих  активов 

и наличных денег. Если наличных денег окажется больше стоимости актива, 

то агент формирует ордер на покупку актива по цене на 1% выше рыночной. 

Портфельный  агент  по  природе  своей  осторожен  к  рискам.  В  модели  это 

проявляется  тем,  что  он  покупает  актив  по  цене  на  1%  выше  рыночной 

стоимости, а не выше самого дорого ask в регуляторе, как это делали другие 

агенты.  В  случае,  когда  наличных  денег  агента  оказывается  меньше 

стоимости его активов, он формирует ордер на продажу по цене на 1% ниже 

рыночной  цены  актива.  В  случае,  когда  стоимость  активов  портфельного 

инвестора  равна  имеющимся  наличным  деньгам,  его  основная  цель 

выполнена.  В  таком  случае  он  должен  по  идеи  быть  полностью 

удовлетворённым  и  не  изменять  это  состояние,  однако  в  разработанной 

модели  при  такой  ситуации  агент  будет  с  50%  вероятностью  покупать  или 

продавать  единицу  актива  по  рыночной  цене.  Это  объясняется  тем,  что  в 

реальной  жизни  портфель  инвестора  состоит  из  множества  различных 

ценных  бумаг.  Чтобы  понять  значимость  той  или  иной  бумаги,  в  малых 

количествах ведутся постоянные торги. 

 

31 

Если  рыночная  цена  в  результате  стадного  поведения  шумовых  и 

рациональных  трейдеров  начнёт  резко  расти,  то  портфельные  инвесторы 

начнут  избавляться  от  своих  активов,  чтобы  следовать  своей  поставленной 

инвестиционной  цели.  Когда  же  рыночная  цена  начнёт  резко  снижаться,  в 

какой-то  момент  времени  портфельные  агенты  начнут  скупать  активы.  Тем 

самым,  они  служат  буфером  против  результатов  стадного  поведения,  хотя 

сами такую задачу не преследуют. 

3.5. Описание симуляции модели 

Выше  было  изложено  полное  описание  разработанной  имитационной 

модели.  Её  программный  код  с  достаточной  подробностью,  учитывая 

классовую структуру, описан в приложении. Время подошло к тестированию 

модели,  в  результате  которого  будут  вскрываться  её  особенности  и 

характеристики.  Для  начала  проследим  работу  протекающих  в  модели 

процессов при её симуляции.  

При  запуске  модели  первым  делом  инициализируется  количество 

денежных  единиц  и  количество  единиц  активов  каждого  агента.  Регулятор 

инициализирует  начальную  рыночную  стоимость  актива.  Далее,  с  заданной 

вероятностью  происходит  инициализация  типов  агентов  по  их  стратегиям. 

Каждый агент обладает вероятностью создания ордера. Когда агент получает 

право  на  создание  ордера  он,  следуя  своей  стратегии,  начинает,  либо 

смотреть  на  очередь  ордеров  в  регуляторе  (если  это  шумовой  или 

рациональный  агент),  либо  отталкиваться  от  рыночной  стоимости  актива 

(если  это  портфельный  инвестор).  После  чего  создаётся  ордер  с  заданным 

временем жизни в очереди регулятора. Ордер удовлетворяется по стоимости  

того ордера, который лежит в регуляторе. Если созданный ордер, в силу свой 

не  привлекательной  стоимости,  не  удовлетворяется,  то  агент  простаивает  в 

ожидании до тех пор, пока не реализуется в пользу другого агента, который 

шёл  в  ногу  с  рыночной  ценой.  Информация  о  сделках  постоянно 

записывается  регулятор  в  отдельный  архив.  Таким  образом,  создаётся 

 

32 

статистика,  в  которую  входят  следующие  показатели:  рыночная  цена, 

количество ордеров в очередях asks и bids и вся информация о совершённых 

сделках (тип агента, его наличные деньги в момент времени t, его количество 

актива в момент времени t, по какой цене он совершал asks или bids).  

При  прошествии  времени  ожидания  ордер  удаляется,  регулятор 

обновляет списки  asks и bids. При удалении ордера стирается память о типе 

его  владельца.  Эти  владельцы  заново  проходят  операцию  распределения 

типа,  после  чего  будет  определено,  будет  ли  этот  агент  шумовым, 

рациональным, или портфельным инвестором.  

Каждая  проведённая  сделка  меняет  рыночную  стоимость  актива,  а 

регулятор  выдаёт  её  динамику.  Интерфейс  регулятора  в  интерактивном 

режиме  строит  график  зависимости  рыночной  стоимости  актива  от 

модельного времени. 

На  рисунке  4  приведён  пример  интерфейса  модели  при  её  запуске. 

Параметры были взяты из пункта из пункта 3.6.  

 

Рис. 3. Интерфейс регулятора при демонстрации работы модели 

Доля участников: шумовых - 14%, рациональных - 12%, портфельных инвесторов - 76% 

 

График  демонстрирует  изменение  рыночной  стоимости  актива  во 

временном  диапазоне  (500  модельных  временных  единиц).  Массивы  Asks  и 

 

 

33 

Bids  представляют  собой  очереди  ордеров  в  регуляторе.  Цифры, 

расположенные  напротив  этих  массивов,  показывают  количество  ордеров, 

прибывающих  в  состоянии  ожидания  в  настоящий  момент  времени.  Эти 

значения  колеблются  около  нуля  или  обнуляются  при  совершении  сделок. 

Параметр 

initMarketPrice  показывает  заданную  начальную  рыночную 

стоимость актива. В массив dayPrice заносится стоимость всех совершенных 

сделок  за  время  вычисления  рыночной  стоимости  актива,  а  значение  в 

скобках  под  значком  dayPrice  есть  количество  всех  совершённых  сделок  за 

этот временной интервал. За всё время работы модели в массив averagePrice 

заносится  вычисленная  рыночная  стоимость  актива.  Значение  в  скобках 

показывает  количество  таких  подсчётов  за  всё  время  работы  модели.  

CalculateAveragePrice  –  таймер,  который  каждые  2  единицы  модельного 

времени  сообщает  о  том,  что  пора  занести  вычисленную  рыночную 

стоимость актива в массив averagePrice. average_Price – переменная, которая 

показывает текущую рыночную стоимость актива. Таким образом, каждые 2 

минуты  модельного  времени  из  массива  dayPrice  вычисляется  среднее 

арифметическое  число  (рыночная  стоимость),  потом  данное  значение 

отправляется  в  массив  averagePrice,  и  также  оно  отправляется  переменной 

average_Price,  после  чего  все  элементы  массива  dayPrice  обнуляются. 

Изменение рыночной цены фиксируется на графике. 

3.6. Параметры разработанной модели 

1. 

2. 

«Фиксированные параметры» модели: 

Количество агентов – 1000; 

initPrice = 200-300 – количество денежных единиц с которым начинает 

торги каждый участник рынка; 

3. 

initVolume  =  20-30  –  количество  единиц  актива  с  которым  начинает 

торги каждый участник рынка; 

4. 

5. 

initMarketPrice = 10 – стартовая рыночная цена актива; 

Время провисания ордера – 4 модельные единицы. 

 

34 

«Переменные параметры» модели: 

1. 

Доля различных типов участников на рынке. 

3.7. Основные особенности симуляции и юстировка модели. 

В  ходе  тестирования  разрабатываемой  модели,  проведя  множество 

прогонок,  были  установлены  некоторые  зависимости  поведения  модели  от 

задаваемых  параметров.  Как  и  предполагалась,  сильнейшее  воздействие  на 

рынок  оказывает  доля  распределения  агентов  по  их  типам,  когда  остальные 

параметры (см. пункт 3.6.) влияют на поведение модели значительно меньше. 

Поэтому  все  параметры  были  разделены  на  «фиксированные»,  которые  в 

последующих  симуляциях  не  будут  изменяться,  и  «переменные»,  от 

изменения которых будет зависеть поведение всей модели. 

Конечно,  в  модели  можно  изменять  любые  параметры  по  своему 

желанию,  главное,  чтобы  значения  их  не  были  неадекватными.  Например, 

если из приведённых выше параметров сильно понизить количество агентов ( 

в предела от 10-100), рынок долго не просуществует (см. рис. 5). 

 

Рис. 5 Динамика рыночной стоимости актива в модели с малым 

количеством агентов. 

 

 

35 

 

При  таком  малом  количестве  участников  говорить  о  рынке  нельзя. 

Скорее  их  торговля  интерпретируется,  как  индивидуально  договорная.  Из 

рисунка 5 видно, что уже на 18 минуте рынок приходит в насыщение, то есть 

в  состояние,  когда  ни  один  агент  не  может  действовать,  следуя  своей 

стратегии.  Рациональные  агенту  в  столь  короткий  промежуток  времени 

успели продать все свои активы. Шумовые агенты пытаются им подражать и 

рождают  предложение  на  оставшиеся  их  активы.  Портфельные  инвесторы 

скупают  нужное  количество  актива,  выполняя  свою  основную  цель.  Далее, 

ни  один  участник  не  может  быть  удовлетворён  и  рынок  приходит  к 

насыщению. 

Большое  значение  количества  агентов  составляет  трудность  для 

вычислительной  машины.  Расходуется  вся  стековая  память  компьютера  и 

модель виснет. Поэтому для адекватности модели участников были выбраны 

в достаточном количестве (1000-10000). 

 

Рис. 6. Поведение рынка в модели с малым количеством начального 

 

объёма активов у агентов. 

 

 

36 

Такие  же  рассуждения  применяются  к  выбору  значения  начального 

богатства  агентов.  Если  установить  агентам  малые  объёмы  активов  или 

наличных денежных средств, рынок в скором времени придёт в насыщение (см. 

рис. 6). 

Ситуация  подобна  предыдущей.  Малое  количество  актива  или  денежных 

средств,  влечёт  за  собой,  в  какой-то  момент  времени,  отсутствие  спроса  или 

предложения.  

Следует  задать  агентам  достаточное  количество  активов  и  начальных 

денежных  средств.  В  ходе  тестирования  было  выявлено,  что  объёмы  активов  у 

агентов  не  должны  быть  ниже  10  единиц,  а  начальные  денежные  средства  не 

должны быть меньше 100 единиц.  

Денежные  средства 

задаются  относительно  начальной  рыночной 

стоимости  актива.  Богатство  каждого  агента  в  начальный  момент  времени 

делится  с  небольшим  вероятностным  варьированием  на  активы  и  денежные 

средства пополам.  

Начальная  рыночная  цена  актива  по  своему  влиянию  на  модель 

пропорциональна  влиянию  количества  начальных  денежных  средств  агентов. 

Поэтому  адекватный  размер  денежных  средств  выявлялся  относительно 

фиксированной рыночной цены. 

Так  же  был  протестирован  последний  фиксированный  параметр  –  время 

провисания  ордера  в  регистраторе.  Если  этому  параметру  задать  нулевую 

величину, то торговля никогда не начнётся. Не будет ни спроса, ни предложения 

(см. рис. 7) 

Если  же  установить  слишком  малое  время  провисания  ордера,  то  рынок  

станет  не  стабильным  при  любом  задании  остальных  параметров  (см.  рис.  8). 

Вызвано это тем, что в короткий промежуток времени осуществляется огромное 

количество  сделок.  При  такой  динамике  изменения  рыночной  цены  актива 

шумовые  и  рациональные  агенты  оказывают  сильнейшее  подражательное 

влияние  и  расшатывают  рыночные  цены  до  неминуемого  краха.  При  слишком 

большом времени провисания ордера (от 10 и больше) рынок. 

 

37 

Рис. 7. Демонстрация модели с нулевым временем провисания ордера. 

 

 

 

       

 

 

 

38 

Рис. 8. Демонстрация работы модели, 
время провисания ордера равно единице 

При  слишком  большом  времени  провисания  ордера  (от  10  и  больше 

модельных  единиц)  рынок  в  скором  времени  приходит  в  состояния 

насыщения  и  торговля  останавливается  (см.  рис.  9).  Проведя  множество 

тестов,  четыре  единицы  модельного  времени  оказались  оптимальным 

временем провисания ордера. 

 

Рис. 9. Демонстрация работы модели, 

время провисания ордера равно 30 модельным единиц 

 

 

Исследовав вышеизложенные особенности, разработанная модель была 

отъюстирована. В результате чего был зафиксирован набор  параметров, при 

котором  модель  ведёт  себя  адекватно  (см.  пункт  3.6).  Переменным 

параметром осталось доля типов агентов на рынке.  

К такому результату и велась юстировка модели. Теперь единственным 

параметром,  влияющим  на  динамику  формирования  рыночной  цены, 

является  доля  типов  агентов  на  рынке.  Смотря  на  рынок  с  точки  зрения 

поведенческих  финансов,  именно  от  этого  параметра  зависит  развитие 

рынков.  

В  результате  тестирования  исследуемая  модель  была  окончательно 

разработана.  Теперь,  чтобы  охарактеризовать  основные  принципы  работы 

созданной  модели  и  протекающие  в  ней  процессы,  осталось  реализовать 

39 

 

большое  число  прогонок  модели,  в  результате  которых,  будут  построены 

различные  сценарии  развития  рынка.  Сценарии  продемонстрируют, 

насколько  точно,  построенная  модель  искусственного  рынка  описывает 

процессы,  протекающие  на  реальном  рынке.  Результаты  прогонок  модели, 

сценариев и их анализ приведены в следующей главе. 

 

40 

Глава 4. Результаты симуляции модели  

4.1. Тестирование разработанной агентно-ориентированной модели 

В  приложении  представлена  серия  тестов  (прогонок)  модели,  в  ходе 

которых 

были 

выявлены 

некоторые 

закономерности 

поведения 

искусственного рынка.  

Тесты  проходили  следующим  образом:  при  заданных  фиксированных 

параметрах (см. пункт 3.6), изменялась доля типов участников рынка. 

 Сначала было найдено соотношение, при котором виртуальный рынок 

исправно  работал  (см.  рис  10):  шумовые  –  16%,  рациональные  –  12%, 

портфельные инвесторы – 72%. 

 

Рис. 10. Демонстрация работы модели со следующими параметрами: 
шумовых - 16%, рациональных - 12%, портфельных инвесторов - 72% 

 

 

 

Далее  чтобы  понять  как  именно,  тот  или  иной  тип  агента  влияет  на 

поведение изменения рыночной цены актива, изменялось доля участников. В 

первую  очередь  изменялась  доля  шумовых  агентов,  а  приращение  от 

изменения доли уходило к портфельным инвесторам. Это означает, что если 

увеличить  долю  шумовых  агентов,  то  ровно  настолько  же  уменьшится  доля 

портфельных инвесторов. 

 

41 

В результате были найдены некоторые предельные значения. При 23% 

шумовых агентов на рынке наблюдается долгосрочный финансовый крах (см. 

рис. 11). 

 

Рис. 11. Демонстрация долгосрочного краха. Параметры: шумовых - 23%, 

рациональных - 12%, портфельных инвесторов - 65% 

 

 

 

При 14%  шумовых агентов на рынке наблюдается плавное  понижение 

рыночной стоимости актива (см рис. 12). 

 

Рис. 12. Демонстрация долгосрочного снижения рыночной стоимости 

актива. Параметры: шумовых - 14%, рациональных - 12%, портфельных 

 

 

инвесторов - 74% 

 

Если  «перевербовать»  ещё  большее  количество  шумовых  агентов  в 

портфельных инвесторов, то рыночная цена начнёт с ещё большей скоростью 

снижать своё значение (см. рис. 13). 

 

 

42 

 

 

Рис. 13. Демонстрация долгосрочного снижения рыночной 

стоимости актива. Параметры: шумовых - 8%, 

рациональных - 12%, портфельных инвесторов - 80% 

 

Стабильнее  всего  рыночная  цена  актива  держалась  при  15%  доли 

шумовых  агентов.  Зафиксировав  эту  величину,  те  же  операции  по 

тестированию поведения рынка были проведены для рациональных агентов. 

На  сей  раз  предельным  значением,  при  котором  происходил  скоротечный 

финансовый  крах,  оказалась  16%  доля  рациональных  агентов  на  рынке  (см. 

рис. 14). Крах произошел примерно на 85 единице модельного времени. Это 

могут  быть  часы,  а  может  даже  сутки,  поэтому  такой  крах  нельзя  назвать 

мгновенным. 

 

Рис. 14. Демонстрация скоротечного финансового краха. Параметры: 
шумовых - 15%, рациональных - 16%, портфельных инвесторов - 69% 

 

 

 

43 

Как  и  в  предыдущий  раз  наблюдался  эффект  снижения  рыночной 

стоимости  актива.  Такой  эффект  начинал  происходить  при  5%  доли 

рациональных трейдеров на рынке (см. рис. 15). 

 

 

 

Рис. 15. Демонстрация долгосрочного снижения рыночной 

стоимости актива. Параметры: шумовых - 15%, 

рациональных - 5%, портфельных инвесторов - 80% 

 

Если долю рациональных агентов на рынке продолжать уменьшать, то 

рыночная цена актива начнёт падать с большей скоростью (см. рис. 15) 

 

 

 

Рис. 15. Демонстрация скоротечного финансового краха. Параметры: 

шумовых - 15%, рациональных - 3%, портфельных инвесторов - 83% 

 

И наконец, для большей наглядности и продолжения вышеизложенной 

мысли,  приведём  ещё  один  пример  с  минимальным  количеством 

рациональных агентов (см. рис. 16). 

 

44 

 

 

 

Рис. 16. Демонстрация скоротечного финансового краха. Параметры: 

шумовых - 15%, рациональных - 1%, портфельных инвесторов - 86% 

 

Наиболее  стабильное  состояние  рынка  достигалась  с  6%  долей 

рациональных агентов на рынке (см. рис 17). 

 

Рис. 17. Демонстрация стабильного рынка. Параметры: шумовых - 15%, 

рациональных - 6%, портфельных инвесторов - 79% 

 

 

4.2. Обзор и анализ сценариев поведения рынка. Сценарий №1. 
Рынок, не претерпевающий пузырей и крахов. 

Работа  отъюстированного  разработанного  и  протестированного 

искусственного  рынка  имеет  5  основных  тенденций.  Представим  эти 

тенденции в виде сценариев:  

1.  Стабильный рынок, не испытывающий пузырей и крахов. 

 

45 

2.  Рынок с медленно затухающей рыночной стоимостью актива. 

3.  Рынок с долгосрочным финансовым пузырём и последующим крахом. 

4.  Рынок  с  медленно  растущей,  после,  затухающей  рыночной  стоимостью 

актива. 

5.  Нестабильный Рынок со скорым крахом. 

 

Разберём сценарии более подробно. 

Сценарий 1.  Стабильный  рынок,  не  испытывающий  пузырей  и  крахов.  На 

рисунке  18  изображены  интерфейс  регулятора  и  графики  изменения  рыночной 

стоимости актива в разные промежутки времени. Рассматривая разные временные 

интервалы  симулированного  рынка  можно  сделать  вывод,  что  ничего  не 

предвещает  финансовый  пузырь  или  крах,  стоимость  актива  колеблется  вокруг 

начальной  рыночной  стоимости.  Массивы  asks  и  bids  на  рисунке  18  принимают 

нулевое  значение  элементов.  Вызвано  это  тем,  что  в  настоящий  момент  все 

ордеры удовлетворены. 

На  рисунке  18  изображён  интерфейс  регулятора  и  графики  изменения 

рыночной стоимости актива в разные промежутки времени. Рассматривая разные 

временные интервалы симулированного рынка можно сделать вывод, что ничего 

не предвещает финансовый пузырь или крах, стоимость актива колеблется вокруг 

начальной  рыночной  стоимости.  Массивы  asks  и  bids  на  рисунке  18  принимают 

нулевое  значение  элементов.  Вызвано  это  тем,  что  в  настоящий  момент  все 

ордеры  удовлетворенны.  Если  просматривать  работу  модели  интерактивно  на 

медленной  скорости  (в  500  раз  медленней  единицы  модельного  времени),  то 

можно обнаружить интенсивную торговлю агентов. Массивы asks и bids успевают 

набрать  максимум  до  6  элементов  в  очередь  ожидания,  как  почти  мгновенно 

оказываются  удовлетворены.  Не  трудно  прикинуть  объём  торговли,  если 

посмотреть  на  количество  совершённых  сделок  (dayPrice  =  495)  и  оставшееся 

время для подсчёта значения рыночной стоимости (CalculateAveragePrice = 0,986). 

До  окончания  периода  подсчёта  рыночной  стоимости  осталось,  примерно,  одна 

единица  модельного  времени.  Получается,  что  за  одну  единицу  модельного 

времени происходит примерно 500 сделок, учитывая, что всего участников 1000, 

 

46 

это  огромный  объём  сделок.  Потому  единица  модельного  времени  должна 

интерпретироваться в больших временных интервалах, например в днях.  

В данном сценарии было выбрано 15% шумовых агентов, 6% рациональных 

агентов  и  79%  портфельных  инвесторов.  Поведение  шумовых  и  рациональных 

агентов  не  в  состоянии  вызвать  финансовый  коллапс  благодаря  большой  доли 

портфельных инвесторов на виртуальном рынке. Когда шумовые и рациональные 

агенты  начинают  накренять  рыночную  стоимость  в  сторону  увеличения,  скупая 

активы,  портфельные  агенты,  следуя  своей  стратегии,  начинают  массового 

продавать  активы.  Глядя  на  массовые  продажи,  портфельных  инвесторов, 

начинают  парадировать  как  шумовые  агенты,  так  и  рациональные.  Рыночная 

стоимость  начинает  скакать  вниз  и  в  это  время  портфельные  инвесторы  начнут 

массово  закупать  активы.  Таким  образом,  портфельные  агенты  служат  буфером 

против стадного поведения. Хотя портфельные инвесторы и не заинтересованы в 

такой роли на рынке.  

Рис. 18. Демонстрация сценария № 1. Параметры: шумовых - 15%, 

рациональных - 6%, портфельных инвесторов - 79% 

 

47 

 

  Сценарий 2.  Рынок  с  медленно  затухающей  рыночной  стоимостью 

актива.  На  рисунке  19  демонстрируется  поведение  рынка  с  15%  долей 

шумовых  агентов,  4%  долей  рациональных  агентов  и  с  81%  доле 

портфельных  инвесторов.  От  предыдущего  сюжета  это  отличается  меньшей 

долей  рациональных  агентов и  соответственно  большей  долей  портфельных 

инвесторов.  

Небольшие  колебания  рыночной  цены  создают  все  типы  участники 

рынка.  Видя,  что  рыночная  цена  падает  портфельные  агенты  медленно,  но 

верно, следуя своей основной стратегии, начинают скупать активы у других 

участников.  Количество  денежных  средств  у  портфельных  агентов  остаётся 

почти одним и тем же на протяжении всей работы модели.  

 

Рис. 19. Демонстрация сценария № 2. Параметры: шумовых - 15%, 

рациональных - 4%, портфельных инвесторов - 81% 

 

 

48 

 

.   Сценарий 3.  Рынок  с  долгосрочным  финансовым  пузырём  и 

последующим  крахом.  На  рисунки  20  демонстрируется  поведение  рынка  с 

23% долей шумовых агентов, 12% долей рациональных агентов и с 65% доле 

портфельных  инвесторов.  Каждый  раз,  запуская  модель  с  данными 

параметрами, наблюдается огромная амплитуда колебания рыночной цены. 

В какой-то момент амплитуда перерастает в пузырь и происходит крах. 

Проведя  множество  экспериментов,  было  установлено,  что  крах  может 

закончиться двумя сценариями, либо рыночная цена упадёт до минимальных 

величин,  после  чего  рынок  будет  насыщён,  либо  рыночная  цена  сдвинется 

резко вниз, на не большое приращение на фоне амплитуды пузыря, и рынок 

придёт в насыщение. 

 

Рис. 20. Демонстрация сценария № 3. Параметры: шумовых - 23%, 

рациональных - 12%, портфельных инвесторов - 65% 

 

49 

 

         Сценарий 4. Рынок с медленно растущей, после, затухающей рыночной 

 

стоимостью актива. 

 

 

Рис. 21. Демонстрация сценария № 4. Параметры: шумовых - 22%, 

рациональных - 12%, портфельных инвесторов - 66% 

 

На  рисунке  21  демонстрируется  поведение  рынка  с  22%  долей 

шумовых  агентов,  12%  долей  рациональных  агентов  и  с  66%  доле 

портфельных  инвесторов.  Данный  сценарий  отличается  от  предыдущего 

всего  на  понижение  дали  шумовых  агентов  на  1%,  но  уже  при  таком 

изменении  модель  ведёт  себя  совершено  по-другому.  Как  и  в  предыдущем 

сценарии,  рыночная  цена  начинает  раскачиваться  с  большой  амплитудой.  В 

среднем  рыночная  стоимость  начинает  расти  до  определённого  пика.  С 

 

50 

   ростом  средней  рыночной  стоимостью  колебания  становятся  всё  меньше. 

После  прохождения  «пика»,  модель  переходит  в  режим  долгосрочного 

снижения рыночной цены. 

Сценарий 5. Нестабильный Рынок со скорым крахом. 

Из тестирования модели мы уже знаем, скорые крахи происходят, из-за 

большой  доли  рациональных  агентов  на  рынке.  Поэтому  данный  сценарий 

отличается  от  предыдущего  только  большей  долей  рационных  агентов.  На 

рисунки  22  демонстрируется  поведение  рынка  с  22%  долей  шумовых 

агентов,  17%  долей  рациональных  агентов  и  с  61%  доле  портфельных 

инвесторов. 

В  данной  симуляции  происходят  сразу  два  финансовых  пузыря  и 

последующих  краха.  Если  от  первого  краха  рынок  как  то  оправился,  то  от 

второго  развалился  и  пришёл  в  насыщение.  Исход  данного  сценария  всегда 

одинаков  –  неотвратимый  пузырь  и  крах.  Портфельные  инвесторы  не  в 

состоянии  справиться  с  подражательным  поведением  остальных  участников 

рынка. 

 

Рис. 22. Демонстрация сценария № 5. Параметры: шумовых - 22%, 

рациональных - 17%, портфельных инвесторов - 61% 

 

 

 

51 

4.3 Дальнейшая разработка созданной модели 

Разработанная 

агентно-ориентированная  модель  искусственного 

финансового  рынка  была  написана  на  чистом  объектно-ориентированном 

языке  программирования  java.  Архитектура  модели  представляет  собой 

гармоничную  классовую  структуру.  Например,  если  потребуется  создать 

новый  тип  агентов,  достаточно  подшить  дополнительный  класс  со  своими 

переменными и методами к остальным. Программный код написан на языке 

разработанной  модели.  Поэтому  разработчик,  глядя  на  код,  быстро 

адаптируется в работе модели. Дальнейшее разработка имитационной модели 

с  технической  точки  зрения  не  представляет  трудность.  Достаточно 

усложнять  созданную  модель.  Спускаться  на  более  низкие  уровни 

детализации виртуального рынка. 

Процесс  дальнейшего 

создания  имитационной  модели  может 

продолжаться  и  продолжаться.  Вносить  детали  реального  рынка  в 

виртуальный  рынок  можно  до  бесконечности.  После  каждого  такого 

добавления модель будет выходить на более глубокий уровень детализации. 

Однако важно вносить многозначительные факторы, которые сильно влияют 

на  поведение  рынка.  К  таким  факторам  в  последующей  разработке  модели 

можно отнести следующие:  

1. 

Расширение  типов  агентов  и  усложнение  стратегий  имеющихся. 

Созданная модель содержит всего 3 типа агентов с достаточно простым 

алгоритмом поведение.  

2. 

Торговля  различным  объёмом  торговли.  В  нашей  модели  торговля 

осуществляется  одной  единицей  актива.  Сделано  это  было  для 

простаты.  Торговля  различными  объёмами  активов  обязывает 

создавать более хитрые стратегии, как поведения агентов, так и работы 

регулятора. 

3. 

Реализация  неполной  информативности.  В  созданной  модели  каждый 

агент обладает полной информацией. Это выражается в том, что агент 

 

52 

видит  полный  список  asks  и  bids.  Скрыть  часть  элементов  этих 

массивов для агентов не составит труда для дальнейшей разработки. 

4. 

Создание  нескольких  видов  активов.  В  настоящей  модели  имеется 

только один вид актива.  

5. 

Создание  фундаментальной  стоимости  актива.  В  настоящей  модели 

фундаментальная  стоимость  актива  отсутствует,  из-за  этого  сложно 

численно 

оценивать 

ускоряющийся 

рост 

стоимости 

актива  

(финансовый пузырь). 

6. 

Изменчивое  поведение  агентов.  В  настоящей  модели  агент  строго 

следует  своей  заданной  стратегии.  Шумовой  агент  никогда  не  сможет 

перерасти в рационального или в портфельного инвестора и наоборот. 

7. 

Усовершенствование  интерфейса  модели.  В  интерфейсе  настоящей 

модели  нет  переключателей,  которые  позволили  бы  в  интерактивном 

режиме  изменять  параметры  и  исследовать  последующие  изменения 

работы модели. 

8.  Моделирование  статистических  фактов.  В  идеале  разработанная 

модель  должна  подгоняться  под  реальные  статистические  данные  о 

финансовом  рынке.  Если  это  реализовать,  то  модель  будет 

предсказывать будущие события. 

Были  затронуты  только  те  факторы,  которые  так  или  иначе 

рассматривали  или  даже  осуществляли  другие  исследователи  [16-20].  Хотя 

список усовершенствований модели можно продолжать. 

 

 

53 

Заключение 

В  данной  работе  была  разработана  агентно-ориентированная  модель 

виртуального  финансового  рынка,  чтобы  исследовать  факторы,  являющиеся 

вероятными  причинами  таких  характерных  для  современных  реальных  рынков 

явлений, как пузыри и крахи. 

По 

теме 

агентно-ориентированного  моделирования 

искусственных 

финансовых  рынков  было  изучено  и  проанализировано  множество  литературы. 

Освоены  среда  имитационного  моделирования  AnyLogic  и  соответствующий  язык 

программирования  Java.  Опираясь  на  существующие  модели  виртуальных 

финансовых  рынков,  в  среде  моделирования  AnyLogic  была  разработана  и 

реализована  агентно-ориентированная  модель  виртуального  финансового  рынка. 

Модель  состоит  из  трёх  типов  участников:  шумовых,  рациональных  агентов  и 

портфельных инвесторов. 

В  результате  проведения  большого  количества  тестов  модель  была 

отъюстирована для адекватной работы. Далее, в ходе совершения большого набора 

симуляций модели с различными стартовыми условиями, были выявлены основные 

её  особенности  и  свойства.  Было  зафиксировано  5  основных  сценариев  развития 

модели, каждый из которых зависит от доли тех или иных участников на рынке. 

Проделанная  работа  лишний  раз  демонстрирует,  что  даже  такие  сложные 

явления,  как  финансовые  пузыри  и  крахи  поддаются  изучению  с  помощью 

имитационного  моделирования.  Построенная  модель  в  простых  реализациях 

показала, что пузыри и крахи могут возникать в результате взаимодействия шумовых 

агентов,  рациональных  и  портфельных  инвесторов  в  отсутствие  прочих  игроков,  с 

другими  стратегиями.  Разработанная  модель    так  же  подтверждает  справедливость 

полезности теории поведенческих финансов в исследовании финансовых рынков. 

Созданная  агентно-ориентированная  модель  имеет  множество  перспектив  и 

планов  на  будущую  разработку.  Она  представляет  собой  хорошо  спланированный 

объектно-ориентированный  продукт,  который  служит  удобным  инструментом  для 

исследования устройства реальных финансовых рынков. 

 

54 

Список используемой литературы 

[1]  Markowits Harry M. Portfolio Selection // Journal of Finance. 1952. 7. № 1 

pp. 71-91 

[2]  Sharpe,  William  F.  (1964). Capital  asset  prices:  A  theory  of  market 

equilibrium under conditions of risk, Journal of Finance, 19 (3), 425-442 

[3]  Lintner, John (1965). The valuation of risk assets and the selection of risky 

investments  in  stock  portfolios  and  capital  budgets,  Review  of  Economics 

and Statistics, 47 (1), 13-37. 

[4]  Fisher  Black,  Myron  Scholes,  The  Pricing  of  Options  and  Corporate 

Liabilities,  The  Journal  of  Political  Economy,  Volume  81,  Issue  3(May-

June, 1973) pp 637-654. 

[5]  Cox,  J.C.,  J.E.  Ingersoll  and  S.A.  Ross  (1985).  "A  Theory  of  the  Term 

Structure of Interest Rates". pp 385–407. 

[6] 

[7] 

Johansen, A. and Sornette, D.(1999) Critical crashes, Risk 12(1), 91-94 

Johansen,  A.  Ledoit,  O.,  and  Sornette,  D.(2000).  Crashes  as  critical  points, 

International Journal of  Theoretical and Applied Finance 3, 219-255. 

[8] 

Johansen,  A.,  D.  Sornette,  O.  Ledoit,  Predicting  financial  crashes  using 

discrete scale invariance, Journal of Risk 1 (1999) 5-32. 

[9]  Sornette, D. A. Johansen, Significance of log-periodic precursors to financial 

crashes, Quantitative Finance 1 (2001) 452-471. 

[10]  Sornette,  D.  Why  Stock  Markets  Crash,  Princeton  University  Press, 

Princeton, N.J, 2003. 

[11]  Sornette, D., A. Johansen, J.-P. Bouchaud, Stock market crashes, precursors 

and replicas, Journal de Physique I France 6 (1996) 167-175. 

[12]  Blanchard,  O.J.(1979).  Speculative  bubbles,  crashes  and 

rational 

expectations, Economics Letters 3, 387-389. 

[13]  Blanchard,  O.J.  and  Watson,  M.W.(1962).  Bubbles,  rational  expectations 

and  speculative  markets,  in  Crisis  in  Economics  and  Financial  Structure: 

 

55 

Bubbles,  Bursts,  and  Shocks,  P  Wachtel,  editor(Lexington  Books, 

Lexington, MA). 

[14]  В.Ю.  Попов,  Модели  финансовых  рынков  и  прогноз,  Финансовая 

академия при Правительстве Российской Федерации, Москва, (2008). 

[15]  В.И.  Городецкий,  М.С.  Грушинский,  А.В.  Хабалов,  Многоагентные 

системы, 

Санкт-Петербургский 

Институт 

Информатики 

и 

автоматизации РАН. 

[16]  A  Survey  of  Agent  Based  Artificial  Stock  Markets,  International  Research 

Journal of Finance and Economics 64(2011), 126-139 

[17]  H.G.  Schmidt,  Behavioral  finance  and  agent-based  artificial  markets, 

Erasmus university Rotterdam, Friday March 25, 2011. 

[18]  W. A. Brock and C. H. Hommes. Heterogeneous beliefs and routes to chaos 

in a simple asset pricing model. Journal of Economic Dynamics and Control, 

22(8–9): 1235–1274, 1989. 

[19]  H.  Takahashi  and  T.  Terano.  Agent-based  approach  to  investor’s  behavior 

and asset price ﬂuctuation in ﬁnancial markets. Journal of Artiﬁcial Societies 

and Social Simulation, 6(3), 2003 

[20]  G.  Kim  and  H.  M.  Markowitz.  Investment  rules,  margins,  and  market 

volatility. Journal of Portfolio Management, 16(1):45–52, 1989. 

[21]  Карпов,  Ю.Г.  Имитационное  моделирование  систем.  Введение  в 

моделирование с AnyLogic. 

 

 

56 

Приложения 

Приложение А. Тестирование модели с разными соотношениями 
численности агентов с разной стратегией торговли 

 

 

шумовых - 16%, рациональных - 12%, портфельных инвесторов - 72% 

 

 

 

шумовых - 17%, рациональных - 12%, портфельных инвесторов - 71% 

 

 

шумовых - 18%, рациональных - 12%, портфельных инвесторов - 70% 

57 

 

 

 

 

 

 

 

 

 

 

шумовых - 20%, рациональных - 12%, портфельных инвесторов - 68% 

 

шумовых - 21%, рациональных - 12%, портфельных инвесторов - 67% 

 

 

 

шумовых - 22%, рациональных - 12%, портфельных инвесторов - 66% 

 

58 

 

 

 

 

 

 

 

шумовых - 23%, рациональных - 12%, портфельных инвесторов - 65% 

 

 

шумовых - 15%, рациональных - 12%, портфельных инвесторов - 73% 

 

 

 

шумовых - 14%, рациональных - 12%, портфельных инвесторов - 76% 

 

59 

 

 

 

 

 

 

 

шумовых – 8%, рациональных - 12%, портфельных инвесторов - 80% 

 

 

 

шумовых - 15%, рациональных - 13%, портфельных инвесторов - 72% 

 

 

шумовых - 15%, рациональных - 14%, портфельных инвесторов - 71% 

 

60 

 

 

 

 

 

шумовых - 15%, рациональных - 16%, портфельных инвесторов - 69% 

 

 

 

шумовых - 15%, рациональных - 14%, портфельных инвесторов - 71% 

 

 

шумовых - 15%, рациональных - 15%, портфельных инвесторов - 70% 

 

61 

 

 

 

 

 

 

шумовых - 15%, рациональных - 11%, портфельных инвесторов - 74% 

 

 

 

шумовых - 15%, рациональных - 7%, портфельных инвесторов - 77% 

 

 

 

шумовых - 15%, рациональных - 5%, портфельных инвесторов - 80% 

 

62 

 

 

 

 

 

 

шумовых - 15%, рациональных - 1%, портфельных инвесторов - 84% 

 

 

 

шумовых - 15%, рациональных - 4%, портфельных инвесторов - 81% 

 

 

 

шумовых - 15%, рациональных - 6%, портфельных инвесторов - 77% 

63 

 

 

