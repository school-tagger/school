


Содержание







































Введение

Финансовый рынок представляет из себя очень сложный механизм, который сочетает в себе множество взаимозависимых процессов. Большое количество торговых агентов ежедневно совершают множество операций купли/продажи, что приводит к соответствующим колебаниям цен на торгуемые активы (акции, товары, валюты, деривативы и пр.) Так же большое влияние на цены тех или иных активов оказывает экономическая, политическая и даже развлекательная информация. Поведение участников рынка не всегда рационально, иногда оно может описываться как стадное (подражательное). 

В ходе рыночной торговли в результате деятельности и взаимодействия различных участников рынка, а также влияния ряда экзогенных институтов иметь место такие явления, как: крахи, пузыри. Крах — резкое падение стоимости актива. Крайне негативное явление, которое в зависимости от своей силы влечет колоссальные убытки частных инвесторов, банкротства целых компаний, экономические кризисы. Пузырь — чрезмерное завышение стоимости актива по сравнению с его «справедливой ценой». Справедливая цена — экономическая концепция, предполагающая, что в цену включены только экономически обоснованные издержки, а прибыль не превышает среднерыночную. Пузырь зачастую является предшественником краха.

История знает множество примеров проявления этих двух явлений и их последствия всегда негативно сказывались как на участниках рынка, так и на экономике в целом, что делает изучение природы, причин, последствий, возможных механизмов предсказания и регулирования этих явлений актуальным. 

В данной работе рассматривается и применяется такое новое и перспективное направление исследований, как поведенческие финансы и агентно-ориентированное имитационное моделирование искусственных рынков.

Цель данной работы — создание модели искусственного рынка, в которой, варьируя те или иные факторы и параметры как участников рынка, так и среды, можно проследить возможные сценарии развития рынка, в том числе — приводящие к пузырям и крахам. 

В соответствии с целью работы поставлены следующие задачи:

1. Изучить литературу по темам Моделирования искусственных рынков, Агентно-ориентированного моделирования, Имитационного моделирования, Средств и способов имитационного моделирования. Обратить внимание на основные положения данных моделей, расстановку акцентов.

2. Выбрать среду и средства для разработки и реализации собственной модели.

3. Построить собственную модель, комбинируя компоненты изученных моделей, добавив элементы, которые позволят в сумме приблизить модель к реальному рынку.

4. Составить сценарии, реализующие стабильное и нестабильное поведение рынка, рассмотреть поведение модели при реализации данных сценариев.

5. Оценить возможности развития модели в перспективе.

Текст работы структурирован следующим образом. В первой главе рассматриваются теоретические основы построения агентно-ориентированных моделей финансовых рынков, предпосылки развития моделирования и примеры агентно-ориентированных моделей рынков. Во второй главе обосновывается выбор среды для разработки моделей, описываются архитектура модели, ее компоненты, а так же сценарии реализации модели. В третьей главе описаны результаты реализации сценариев. В четвертой главе рассмотрены направления для возможной дальнейшей разработки, перспективы построенной модели.

Глава 1. Теоретические основы построения агентно-ориентированной модели финансового рынка

1.1. Предпосылки развития агентно-ориентированного моделирования рынков

По направлению научного исследования существует очень большое количество литературы, в которой описано большое разнообразие различных моделей искусственных финансовых рынков. Определение подходов к моделированию финансовых рынков само по себе является открытой и спорной задачей. Как правило, исследователи стремятся предлагать простой, основанный на эмпирике, математический подход к моделированию рынка.

Существующие подходы к моделированию финансового рынка разнообразны, литература по этой тематике многочисленна. Значительный прогресс в понимании финансовых рынков был достигнут, например, Марковицем [1], выдвинувшим теорию портфеля со средним отклонением, Шарпом [2], с его моделью оценки основных фондов, Линтером [3], развившим теорию Шарпа, Мертоном, Блэком и Шоулзом [4], с теорией оценки опционов и хеджирования, Россом с теорией оценки арбитражных операций, Коксом [5], Ингерзоллем и Россом, с теорией процентной ставки, и это лишь наиболее значительные вехи в развитии теории финансовых рынков. 

Экономические модели отличаются от моделей, используемых в естественных науках, поскольку экономические агенты должны предвидеть будущее. Решение каждого зависит от решения других (стратегическая зависимость) и ожиданий будущего.

Одним из организующих принципов в моделировании является условие отсутствия арбитражных возможностей, т.е. два актива со сходными характеристиками должны продаваться по одной цене, и то же касается этого же актива, продаваемого на двух различных рынках. Если цены отличны, возникает возможность получить прибыль от продажи данного актива там, где он продается дороже, и покупки там, где он продается дешевле. Основная идея состоит в том, что при наличии арбитражной возможности цены не могут существенно отличаться в течение долгого времени, или же разница между ними должна быть не достаточна для получения арбитражной прибыли (например, не покрывать транзакционных издержек в виде комиссии маркет-мейкера). Условие отсутствия арбитража — идеализация последовательного динамического состояния рынка, являющегося результатом непрерывных действий трейдеров, т.е. в отличие от аппроксимации равновесия это тонкая взаимозависимая организация рынка, описывающая не результат, а процесс установления (или отклонения от) равновесия на рынке. 

Описание принципов поведения участников рынка является одним из важнейших аспектов моделирования искусственных финансовых рынков. Ставший уже хрестоматийным пример —  это разделение трейдеров на рациональных и шумовых. Рациональные трейдеры следят за поведением рынка и строят на этом собственные ожидания будущего, исходя из которых, принимают решения к действиям. Шумовые трейдеры склонны действовать, исходя из стадного, подражательного поведения. Такой подход к моделированию мотивирован тем, что действия большинства участников рынка обоснованно не какими-либо рациональными соображениями, а подражанием знакомым, авторитетами т.п. в силу ограниченности доступа к информации, знаний, навыков или времени.

Помимо отсутствия арбитража, второй важный организующий принцип в моделировании финансовых рынков, заключается в рациональности инвесторов и экономических агентов. Значительная часть трейдеров большую часть времени ведет себя рационально, то есть пытается оптимизировать свою стратегию исходя из имеющейся информации. Это можно назвать "ограниченной рациональностью", поскольку имеющаяся в наличии информация бывает неполной, и помимо этого, трейдеры финансового рынка также обладают ограниченными возможностями по правильной оценке даже имеющейся информации. Кроме того, инвесторы не уверены в характере и предпочтениях других инвесторов на рынке. Это значит, что процесс принятия решения по сути своей является "шумным", и, как следствие, неизбежен вероятностный подход при моделировании фондового рынка из-за отсутствия определенности. На нешумном фондовом рынке при наличии всей информации, где присутствуют только полностью рациональные трейдеры безграничных аналитических способностей, уровень торгов был бы достаточно мал, если бы вообще присутствовал. Преобладание участников с иррациональным поведением может привести к "спекулятивным пузырям".

Рациональность рынка следует понимать в том смысле, что цены активов установлены так, как если бы все инвесторы были рациональны. Рынок становится рациональным, если на нем присутствует достаточно много разнообразных агентов, действующих исходя из ограниченной информации. А слишком большая осведомленность приводит к тому, что инвесторы начинают верить, что они смогут обыграть рынок. Это побуждает их тратить очень много времени на исследования и заключать сделки слишком быстро на основе имеющейся информации, не покрывая прибылью транзакционные издержки. Таким образом, сверхосведомленность ведет к расширенному анализу скудной информации, имеющейся в наличии, и встраиванию данной информации в цены бумаг.

Рынок можно сравнить с огромным, относительно дешевым, постоянно проводящим голосование механизмом, который фиксирует обновляемый список голосов миллионов инвесторов, отданных за тот или иной проект, и голоса эти, в свою очередь, меняют текущие цены. В свете данного механизма, инвестору-одиночке практически всегда безрассудно верить в то, что цены в значительной мере ошибочны.

Важный вклад в развитие моделирования пузырей и крахов финансовых рынков внес Сорнетте [6 — 10]; в своей основополагающей работе [11] по этой теме он выделяет два «фундаментальных» подхода к пониманию моделирования крахов. 

Во-первых, это принцип, лежащий в основе «модели, управляемой риском», которая является расширением модели Бланчарда и модели Бланчарда и Уотсона [12, 13]. Она находит подтверждение в микроскопических моделях поведения инвесторов, разработанных для формализации стадного поведения или взаимного «инфицирования» подражательным поведением на спекулятивных рынках. В этой модели, за счет механизмов подражательного поведения и кооперативности шумовые трейдеры могут делать рынок все более и более нестабильным в определенные временные интервалы, поскольку они иногда резко меняют свое мнение, а объемы людей, вовлеченных в это изменение господствующего мнения очень велики. Поскольку риск краха резко возрастает, рациональным трейдерам кажется привлекательной идея продолжать держать свои инвестиции только, если в этот момент времени ускоряется и рост доходности, обеспечивающий адекватную компенсацию растущих рисков. Основным в этой модели является то, что крах не минуем и есть определенный шанс, что пузырь не «взорвется», а мягко сдуется. Это делает вполне рациональной идею принятия решения о сохранении инвестиций на рынке и о получении прибыли от рискованных вложений для этой части трейдеров. 

Во-вторых, это «модель, управляемая ценой», в которой логика предыдущей модели инвертирована [11], управляемой риском: в ней, как и в предыдущей модели, в результате действий рациональных инвесторов, скорее цена управляет коэффициентом риска краха, а не наоборот. Сама цена управляется подражанием и стадностью «шумовых» инвесторов. Первая группа шумовых трейдеров своим коллективным поведением приводит к росту волатильности цен по ускоряющейся, но стохастической спирали, обеспечивая, тем самым, возникновение ценовых пузырей. Рациональные инвесторы, понимая, что пузырь не подкреплен фактами, оценивают существование связанного с ним риска краха или серьезной коррекции, которая может привести цену назад к фундаментальной стоимости. Это поведение, воплощенное в условии отсутствия арбитража, приводит к следующим последствиям: аномально взмывающие ввысь цены подразумевают растущую угрозу краха, определяемая как реальная возможность реализации такого сценария уже на следующий день с некоторой вероятностью. Растущий риск краха - неизбежная темная сторона рыночных доходов. Крахи — это стохастические явления, оцениваемые количественно их коэффициентом риска, который отклоняется от нормального значения по мере роста рыночной стоимости. В данной модели долгосрочное стационарное поведение рынка состоит из ряда временных интервалов, описываемых случайным блужданием, перемежающихся с интервалами пузырей, которые заканчиваются крахами, возвращающими рынок ближе к фундаментальным оценкам. Замечательным свойством данной модели является то, что крах никогда не наступает при условии, что цены остаются в разумных пределах. Это происходит в силу того факта, что коэффициент риска краха является сильно нелинейной функцией ценового уровня, которая работает подобно усилителю. Вероятность краха, таким образом, очень низка при незначительных колебаниях цены от фундаментальной стоимости, но она все больше растет по мере роста цены. Даже если рыночная цена взмывает вверх, всегда остается возможность, что она вернется к исходному положению мягко, без краха. Данный сценарий, однако, становится все менее и менее вероятным, по мере роста цены.

Эти подходы рассматривают рынок агрегировано, не объясняя, каким образом складываются цены, тогда как в конечном итоге процессы цены ведут себя так, как ведут себя участники рынка; одним из вариантов перехода на уровень участников рынка является агентно-ориентированное моделирование рынков.

1.2. Примеры агентно-ориентированных моделей рынков

1.2.1. Модель Brock и Hommes. Адаптивная система убеждений

В своей работе [14] Brock и Hommes исследуют динамику простой дисконтированной стоимости активов рынка посредством модели ценообразования с гетерогенными стратегиями участников рынка. Авторы исследуют возможные маршруты бифуркации в сложной динамике цен на активы, используя сочетание теории бифуркации и численные методы. В экспериментах рассматриваются несколько простых типов стратегий. Инвесторы могут выбрать один из двух типов активов: рискованный актив и безрисковый актив. По рискованным активам выплачиваются дивиденды. Цены на рынке колеблются в результате действий агентов, определяемых различными паттернами ожиданий. Агенты имеют возможность выбрать линию поведения из конечного множества предсказателей будущих цен на рискованные активы и пересматривают свою стратегию в каждом периоде. Формирование множества стратегий основано на результирующих показателях деятельности агентов в прошлом, а именно — реализованная прибыль по активам. Интенсивность выбора — параметр измерения того, как быстро агенты переключаются между различными стратегиями поведения. Если интенсивность выбора бесконечна, вся масса торговцев использует стратегию, с которой они получат наибольшую выгоду. Если интенсивность выбор равна нулю, масса трейдеров распределяется равномерно по всему набору доступных стратегий. В работе [14] показано, как увеличение интенсивности выбора для переключения стратегий может привести к нестабильности рынка и появлению сложной динамики цен на активы и доходы. Это включает в себя нерегулярные переключения между фазами, где цены близки к фундаментальной ценности, фазы оптимизма, где продавцы порождают тенденции роста, и фазы пессимизма, где продавцы вызывают резкое падение цен на активы.

1.2.2.	Модель Lux и Marchesi. Стохастические взаимодействия и законы подобия

Модель Lux и Marchesi [15] — агентно-ориентированная модель финансового рынка, которая следует традициям ранних попыток исследования стадного поведения с помощью стохастического моделирования. Примером этого является модель вербовки муравьев Кирмана 1993 года, которая также была предложена в качестве аналогии для стадного поведения инвесторов на финансовых рынках. Рынок состоит из двух типов инвесторов, фундаменталистов и чартистов, и двух типов инвестиций, рисковые активы и безрисковые активы. Кроме того, по рисковым активам выплачиваются дивиденды в начале каждого периода. Рыночный регулятор, созданный для процесса корректировки цен, определяет рыночную цену на основе различий между спросом и предложением. По типу стратегии, агенты могут быть либо фундаменталистами, либо чартистами, которые в свою очередь делятся на оптимистов (покупателей) и пессимистов (продавцы). Кроме того, есть вероятностное переключение между этими группами агентов. Вероятность переключения между двумя типами чартистов основана на подражательном поведении и текущем ценовом тренде, в то время как вероятность переключения между чартистами и фундаменталистами на основе наблюдаемых различий в прибыли. Модель способна генерировать следующие свойства рыночных цен: бессистемные отклонения рыночных цен от фундаментальной цены, распределение прибыли, обладающее «тяжелыми хвостами», и кластеризацию волатильности.

1.2.3. Модель Кима и Марковица

Одной из основных черт модели Кима и Марковица [14] является относительная простота её структуры: рассматривается рынок с всего 1 тип актива — акции, по которым не выплачиваются дивиденды, и 2 типа агентов: портфельные хеджеры и «сбалансирвоанные» трейдеры. Простоту устройства модели одновременно считают ее положительной чертой и недостатком.

Все агенты выходят на рынок в начальный момент времени, располагая одинаковым начальным запасом актива и денег. Сбалансированные трейдеры имеют целью поддерживать строгую структуру портфеля своих активов в долгосрочной перспективе (1:1 денег и актива), т.е.

.

Портфельные хеджеры применяют метод Черно – Джонса (CPPI), т.е. поддерживают на постоянном уровне структуру своего хеджа:

,

где  — постоянная доля безрискового актива в портфеле,  — доля акций (в денежном выражении).

Выходя на рынок, агент принимает решение, опираясь на такие величины, как спрос, предложение, и структуру своего портфеля согласно его стратегии поведения. Решение заключается в выборе действия (покупка или продажа актива) и желаемой стоимости осуществления этого действия. Стоимость определяется на основе разницы текущего рыночного предложения и спроса.

Технически рыночная активность в модели реализуется следующим образом. Формируемые агентами ордера (orders) на покупку (asks) и на продажу (bids) активов по некоторой цене  составляют рынок. В каждый момент времени агенты выходит на рынок с некоторой вероятностью чтобы совершить некоторые действия, а именно:

1. Когда рынок составляют только запросы на покупку активов, агент формирует свой запрос также на покупку, но по стоимости выше на 1% стоимости самого дорого из текущих запроса на покупку ().

2. Аналогично, когда рынок составляют запросы только на продажу, агент создает свой запрос на продажу на 1% дешевле, чем самый дешевый из текущих ордеров ().

3. Когда в рынке есть ордера как на покупку, так и на продажу, агент исходит из соотношения их количества: если в рынке больше ордеров на продажу, то создается также ордер на продажу и наоборот; стоимость создаваемого запроса агент рассчитывает как среднее арифметическое самого дорогого ордера на покупку и самого дешевого ордера на продажу. 

4. Если в рынке нет ордеров, то агент формирует ордер на продажу или покупку по стоимости, на основе которой он формировал предыдущий ордер; выбор типа ордера зависит от того, к какому типу принадлежит агент, и какова его текущая линия поведения.



5. Наконец, все вышеописанные действия агенты совершают только при условии, что они соответствуют типу агента и соответствующей стратегии поведения. Сбалансированные агенты стараются поддерживать пропорцию 1:1 в количестве активов и денег на руках, и если, например, у агента данного типа , то он не будет выполнять второе действие, даже при отсутствии ордеров на покупку, т.к. это только усугубит невыполнение его стратегии. Аналогично, портфельные хеджеры поддерживают заданную стоимостную структуру своих портфелей. 

Фактически, портфельные хеджеры и сбалансированные агенты не так сильно отличаются друг от друга: портфельному хеджер с параметрами структуры портфеля  и  (т.е. ) стремиться поддерживать структуру портфеля 1:1 и становится, таким образом, сбалансированным трейдером. 

Базовая реализация этой модели подразумевает постоянное количество агентов и структуру агентов по типам. Следовательно, только параметры структуры портфеля хеджеров (доля богатства  и постоянная доля ) определяют поведение рынка и динамику среднерыночной цены актива. Сбалансированные агенты своей активностью формируют умеренную постоянную волатильность среднерыночной цены, и долгосрочной перспективе тенденции среднерыночной цены будут зависеть в большей степени от доли портфельных хеджеров и параметров их портфеля —  и . 

В некотором смысле сбалансированные агенты представляют собой всего потребительскую массу на рынке актива, и развитие пузырей и крахов может быть спровоцировано значительным перевесом массы портфельных страховщиков на рынке и выбираемой ими стратегией торговли. Базовая реализация модели подразумевает однородность портфельных хеджеров по параметрам  и , что фактически гарантирует, что все они будут действовать «стадно».



Основная концепция, разрабатываемой в данной диссертационной работе агентно-ориентированной модели искусственного рынка, базируется на моделях управляемой риском и управляемой ценой. Предполагается, что модель должна иметь в наличие, как минимум, два типа агентов: «шумовых» или «стадных» и рациональных трейдеров. Финансовый пузырь и последующий крах обуславливаются кооперативным поведением участников рынка. К такому поведению склоны шумовые трейдеры, которые имеют свойства подражать своему окружению. 

Если в данной модели стратегии, убрав из них стремление агентов держать свое богатство в заданном соотношении активов и денежных единиц, то они будут иметь свойства «стадных» трейдеров и принадлежать одному типу агентов. Вернёмся к действиям агентов в модели, убрав пятый пункт. Агент, приходя на рынок, анализирует количество запросов на покупку и продажу активов. Он следует за большинством и подражает ему. Если количество запросов на продажу больше количества запросов на покупку (bids > asks), агент оставляет свой order на продажу, задав стоимость немного ниже самой низкой стоимости среди имеющихся запросов на продажу. Так агент максимизирует вероятность того, что его актив будут покупать в первую очередь. Аналогично и в обратном случае, когда asks > bids, только в этом случае агент увеличивает стоимость на свой ask. 

Глава 2. Создание имитационной модели искусственного финансового рынка

2.1. Выбор среды моделирования

Существует большое количество программного обеспечения для реализации имитационных моделей: Agnes, VisSim, Arena, AnyLogic. В качестве среды для реализации имитационной модели было решено использовать  AnyLogic. Данное программное обеспечение оснащено обширным базовым функционалом для реализации агентно-ориентированных моделей. Выделяет ее такая особенность, как возможность задания переменного шага дискретизации времени, что позволяет максимально приблизить модель к имитации реального времени. То есть каждый агент действует независимо и не ждет наступления определенных шагов во времени в общем цикле программы. Так же AnyLogic позволяет создавать одновременно большое количество объектов, позволяет описывать их свойства, и что не маловажно позволяет описывать свойства общей среды, в которой располагаются агенты. Имеется возможность задания структуры сети взаимодействий между агентами (реализация принципов распространения информации между трейдерами). Внутри среды используется язык программирования Java. 

В процессе прохождения научно-исследовательской практики были изучены базовый синтаксис языка Java, базовые принципы программирования на языке Java, общий функционал и возможности среды разработки AnyLogic.

В качестве практической части работы будет построена абстрактная алгоритмическая модель рынка, изменяя характеристики поведения участников которого, будем добиваться проявления таких явлений как крах и пузырь.

2.2. Архитектура модели

Ключевыми элементами архитектуры являются агенты, генерируемые ими ордера, регулятор занимающийся обработкой ордеров и статистикой, а так же стратегии определяющие поведение агентов. Схематически модель представлена на рисунке 1.





Рис. 1. Схема архитектуры модели.



2.2.1. Агенты

В нашей модели мы рассматриваем абстрактный рынок, содержащий в себе n агентов. Каждому агенту перед запуском модели присваивается тип стратегии поведения, которую он будет использовать при формировании ордеров. Агент хранит в себе информацию о том, сколько у него наличности (cash), количество единиц активов (каждый агент получает одинаковое количество единиц активов), а так же стоимость последней совершенной им сделки. Агенты в течение своей жизни постоянно с некоторой интенсивностью генерируют ордера. Агент не может единовременно иметь более одного активного ордера (находящегося в регуляторе в очереди или на совершении сделки).

2.2.2. Ордера

Ордер — это желание агента совершить ту или иную торговую операцию, т.е. ордер содержит в себе следующую информацию: тип ордера (покупка или продажа), объем ордера, и стоимость единицы актива. Во время формирования ордера агент в первую очередь определяет тип ордера – ордер на покупку или ордер на продажу(Ask или Bid). Далее определяется объем ордера. Для простоты в нашей модели агенты торгуют единичными объемами активов. После этого агент определяет стоимость ордера в зависимости от используемой им стратегии поведения.

2.2.3. Регулятор

Регулирующий механизм («регулятор») занимается обработкой всех приходящий ордеров, совершает сделки и собирает статистическую информацию и, в том числе, рассчитывает среднерыночную цену актива. В его интерфейсе в режиме реального времени во время работы модели можно следить за графиком среднерыночной цены, за количеством совершаемых сделок между подсчетами среднерыночной цены, а так же за наполнением очередей ордеров.

2.2.4. Очередь ордеров в Регуляторе

Два массива формируют очередь ордеров на покупку (Asks) и продажу (Bids). В очередь помещаются ордера, которые не смогли быть удовлетворенными сразу, то есть не нашлось такого ордера, который имел бы встречное предложение с более выгодной или равной ценой. Ордер может находиться в очереди только 4 часа (модельного времени), если в течении этого времени ордер не удовлетворяется, то есть не поступает ордера со встречным предложением, для которого данный ордер имел бы более выгодную или равную цену, то данный ордер бракуется, а агент отправивший этот ордер оповещается о том, что ордер забракован. В очереди ордера сортируются по стоимости. На первых местах в очередях находятся самые выгодные ордера, то есть в очереди ордеров на покупку (Asks) будут находиться самые дорогие ордера, а в очереди ордеров на продажу (Bids) будут находиться самые дешевые ордера. Таким образом, ни для какого ордера, хранящегося в очереди, не существует ордера из другой очереди, удовлетворяющего данному ордеру. 

2.2.5. Среднерыночная стоимость актива

В результате совершения сделки Регулятор заносит информацию о стоимости сделки в специальный массив. Каждые два часа модельного времени Регулятор вычисляет среднее арифметическое значение элементов данного массива и полученное значение считается средней рыночной стоимостью актива. Оно записывается в архив со статистикой среднерыночной стоимости и хранится там все время работы модели. В интерфейсе регулятора во время работы модели в реальном времени на графике отображаются изменения текущей среднерыночной стоимости, а так же имеется переменная, показывающая точное значение текущей среднерыночной стоимости с точностью до четвертого знака после запятой. 

Все агенты имеют доступ к информации, содержащейся в регуляторе, они используют ее при расчете стоимости формирующегося ордера в зависимости от используемой стратегии.

2.2.6. Стратегия поведения агента 

Перед запуском модели каждому агенту присваивается тип используемой им стратегии поведения. Абсолютно все стратегии поведения имеют одинаковый интерфейс. Это функции определения типа, объема ордера и его стоимости. Сами методы формирования ордера, его типа, объема и стоимости описаны внутри различных типов стратегий поведения.

Одним из основных управляющих параметров в модели является распределение (численность) агентов по типам возможных стратегий поведения. Всего реализовано 3 стратегии, рассмотрим особенности содержания и реализации каждого типа. 

2.2.6.1. Шумовые агенты

Агенты, обладающие данным типом стратегии поведения, призваны создавать дисбаланс на рынке. Их поведение максимально близко можно описать как стадное или подражательное. Оно не имеет никакого рационального зерна и основано на подражании другим игрокам. Агенты с данным типом поведения наблюдают за поведением рынка, и при проявлении склонения рынка в какую-либо сторону своим поведением создают еще больший крен.

Агент, обладающий данным типом стратегии поведения, наблюдает за мощностью массивов очередей ордеров, хранящихся в Регуляторе. При формировании ордера, в момент определения его типа (покупка или продажа), агент сравнивает количественные мощности массивов очередей ордеров. Если мощность массива очереди ордеров на покупку больше мощности массива очереди ордеров на продажу, то агент намеревается совершить покупку и создает ордер на покупку. Если же мощность массива очереди ордеров на продажу больше мощности массива очереди ордеров на покупку, то агент намеревается совершить продажу и создает ордер на продажу. В случае если мощности этих массивов равны, то агент с вероятностью 50%  создает ордер на покупку или продажу. 

Далее агент задает стоимость своего ордера. В случае если он создает ордер на покупку, то он желает создать наиболее выгодный ордер, чтобы с наибольшей вероятностью реализовать его. Для этого он берет стоимость самого дорогого ордера на покупку, находящегося в массиве очередей ордеров в Регуляторе, и присваивает своему ордеру стоимость на 1% больше данной стоимости. Это увеличивает его шансы на реализацию ордера сразу среди ордеров на продажу находящихся в очереди, или же просто обеспечит попадание на первое место в очереди ордеров на покупку, что поспособствует его наибыстрейшей реализации, так как на момент попадания в очередь, этот ордер будет самым выгодным. Если же создается ордер на продажу, то берется стоимость самого дешевого ордера на покупку и уменьшается на 1%. Таким образом, будет создан самый выгодный ордер на продажу, и это увеличит его шансы на наискорейшую реализацию.

В случаях, если у агента не достаточно наличности для создания ордера на покупку, или нет активов для создания ордера на продажу, то агент находится в состоянии простоя (ожидании) и не совершает никаких действий, ожидая момента, когда на рынке произойдут изменения, при которых его активность станет возможной. Так же в случае если мощности массивов очередей ордеров равны нулю, то агент так же находится в состоянии ожидания, так как специфика его поведения основана на подражании. То есть, если на рынке преобладает желание продавать, то и данный агент будет продавать, если покупать – то и он будет покупать, а если не покупают и не продают, то и он не будет совершать никаких действий. Схематически выше описанное выглядит так:



2.2.6.2. Рационально-шумовые агенты

Агенты, обладающие данным типом стратегии поведения, так же призваны создавать дисбаланс на рынке. Их поведение максимально близко можно описать как стадное или подражательное. Однако, в основе их поведения заложено рациональное зерно. Они нацелены на максимизацию стоимости своего состояния (сумма наличных денежных единиц и произведения количества единиц актива на среднерыночную стоимость единицы актива). Агенты с данным типом поведения наблюдают за поведением рынка, и при проявлении склонения рынка в какую-либо сторону своим поведением создают еще больший крен.

Агент, обладающий данным типом стратегии поведения, наблюдает за поведением средней рыночной цены актива, хранящейся в Регуляторе. При формировании ордера, в момент определения его типа (покупка или продажа), агент сравнивает последнее и предпоследнее значения в массиве среднерыночных стоимостей актива. Если предпоследнее значение меньше последнего, то агент намеревается совершить покупку и создает ордер на покупку. Если же предпоследнее значение больше последнего значения, то агент намеревается совершить продажу и создает ордер на продажу. В случае если эти значения равны, то агент с вероятностью 50% создает ордер на покупку или продажу. 

Далее агент задает стоимость своего ордера. В случае если он создает ордер на покупку, то он желает создать наиболее выгодный ордер, чтобы с наибольшей вероятностью реализовать его. Для этого он берет стоимость самого дорогого ордера на покупку, находящегося в массиве очередей ордеров в Регуляторе, и присваивает своему ордеру стоимость на 1% больше данной стоимости. Это увеличивает его шансы на реализацию ордера сразу среди ордеров на продажу находящихся в очереди, или же просто обеспечит попадание на первое место в очереди ордеров на покупку, что поспособствует его наибыстрейшей реализации, так как на момент попадания в очередь, этот ордер будет самым выгодным. Если на момент создания ордера в массиве очереди ордеров на покупку не будет находиться ни одного ордера, то в качестве цены ордера агент принимает текущую среднерыночную стоимость актива. Если же создается ордер на продажу, то берется стоимость самого дешевого ордера на покупку и уменьшается на 1%. Таким образом, будет создан самый выгодный ордер на продажу, и это увеличит его шансы на наискорейшую реализацию. Если на момент создания ордера в массиве очереди ордеров на продажу не будет находиться ни одного ордера, то в качестве цены ордера агент принимает текущую среднерыночную стоимость актива.

В случаях, если у агента не достаточно наличности для создания ордера на покупку, или нет активов для создания ордера на продажу, то агент находится в состоянии простоя (ожидании) и не совершает никаких действий, ожидая момента, когда на рынке произойдут изменения, при которых его активность станет возможной. Если случается ситуация, когда среднерыночная стоимость актива не изменяется, то есть последнее и предпоследнее значения массива среднерыночной стоимости равны, то агент с вероятностью 50% совершает или покупку или продажу. Схематически выше описанное выглядит так:



2.2.6.3. Стабилизирующие агенты

Агенты, обладающие данным типом стратегии поведения, наоборот призваны стабилизировать рынок. Данные агенты призваны удовлетворять потребности рынка и являются основным двигателем торговли и жизни/работы данной модели. Рациональность в поведении данных агентов сомнительна, поскольку их действия отнюдь не связаны с увеличение стоимости своего состояния. Данные агенты могут и вовсе торговать в ущерб себе. Агенты с данным типом поведения наблюдают за поведением рынка, и при проявлении склонения рынка в какую-либо сторону своим поведением стараются данный крен предотвратить. Если на рынке создается предложение, то эти агенты начинают создавать спрос, если создается спрос – порождают предложение.

Агент, обладающий данным типом стратегии поведения наблюдает за мощностью массивов очередей ордеров, хранящихся в Регуляторе. При формировании ордера, в момент определения его типа (покупка или продажа), агент сравнивает количественные мощности массивов очередей ордеров. Если мощность массива очереди ордеров на покупку больше мощности массива очереди ордеров на продажу, то агент намеревается совершить продажу и создает ордер на продажу. Если же мощность массива очереди ордеров на продажу больше мощности массива очереди ордеров на покупку, то агент намеревается совершить покупку и создает ордер на покупку. В случае если мощности этих массивов равны, то агент с вероятностью 50%  создает ордер на покупку или продажу.

Далее агент задает стоимость своего ордера. В случае если он создает ордер на покупку, то он желает создать ордер, который будет иметь шансы на реализацию, а так же максимально стабилизирует колебания среднерыночной стоимости актива. Для этого он берет текущую среднерыночную стоимость актива, находящуюся в массиве среднерыночных стоимостей актива в Регуляторе, и присваивает своему ордеру стоимость на 1% больше данной стоимости. Это увеличивает его шансы на реализацию ордера сразу среди ордеров на продажу находящихся в очереди, или же просто поспособствует его наибыстрейшей реализации, а так же в случае его попадания в очередь и его дальнейшей реализации несколько снизит колебания среднерыночной стоимости актива. Если же создается ордер на продажу, то также берется среднерыночная стоимость и уменьшается на 1%. Таким образом, это увеличивает его шансы на реализацию ордера сразу среди ордеров на покупку находящихся в очереди, или же просто поспособствует его наибыстрейшей реализации, а так же в случае его попадания в очередь и его дальнейшей реализации несколько снизит колебания среднерыночной стоимости актива.

В случаях, если у агента не достаточно наличности для создания ордера на покупку, или нет активов для создания ордера на продажу, то агент находится в состоянии простоя (ожидании) и не совершает никаких действий, ожидая момента, когда на рынке произойдут изменения, при которых его активность станет возможной. В случае если мощности массивов очередей ордеров равны, то есть, если на рынке отсутствует явное преобладание спроса или предложения, то агент будет случайным образом порождать спрос или предложение со стоимостью близкой к среднерыночной, чтобы удерживать рынок примерно на одном уровне, создавая спрос или предложения более выгодные чем в среднем по рынку. 

Схематически выше описанное выглядит так:



2.3. Сценарии реализации работы модели

Чтобы понять основные принципы работы модели и протекающих в ней процессов реализуем несколько сценариев. Проследим за ходом их выполнения и проанализируем результаты. В ходе реализации сценариев сможем прийти к пониманию того, насколько построенная модель близко описывает процессы, происходящие на реальном рынке.

Предлагается реализовать модель и отследить динамику искусственного рынка в соответствием со следующими сценариями.

Сценарий №1: долгосрочное стабильное существование рынка, не испытывающее пузырей и крахов. Данный сценарий продемонстрирует способность данной модели к длительному существованию, для моделирования долгосрочных процессов.

Сценарий №2: долгосрочное стабильное существование рынка, заканчивающееся массивным пузырем и крахом рынка. В этом сценарии будет продемонстрирован пример долго развивающегося пузыря и его очень быстрое «лопание» — крах.

Сценарий №3: краткосрочное нестабильное существование рынка, обязательно заканчивающееся крахом рынка и, возможно, с пузырем предшествующему краху. В этом случае будет рассмотрена критическая ситуация, при которой жизнь рынка находится на грани возможного существования.

Подбор сценариев осуществляется подбором необходимых для реализации задуманных ситуаций на рынке в результате начала рыночной активности при различных начальных условиях, которые остаются неизменными в ходе всего сценария. Результаты подбора необходимых параметров и анализ реализации сценариев приведены в следующей главе.

Глава 3. Результат реализации работы построенной модели

3.1. Общие для всех сценариев параметры и особенности работы модели 

В момент старта модели происходит инициализация таких значений как среднерыночная стоимость актива (10 денежных единиц ровно), количество денежных единиц у агентов (90-110 денежных единиц, определяется случайным образом в начале «жизни» рынка из равномерного распределения ), количество единиц актива у агента (10 единиц актива у каждого агента). Количество агентов принимающих участие в работе модели — 1000 (выбор такого количества агентов обусловлен ограничением вычислительных мощностей и по нашему мнению не сказывается существенно на качестве результатов симуляции; при необходимости среда моделирования допускает существенно большее число одновременно действующих агентов). Также происходит инициализация типа стратегии поведения у каждого агента. Распределение типов стратегии поведения происходит в соответствии с некоторым заданным распределением; например, 16% агентов с шумовой стратегией поведения, 7% агентов с рационально-шумовой стратегией поведения и оставшиеся 77% агентов принимают стабилизирующую стратегию поведения. Вариация этого распределения — важнейший параметр, отличающий различные сценарии работы модели.

После стартовой инициализации заданных значений агенты начинают генерировать ордера в зависимости от присвоенного им типа стратегии. Регулятор принимает ордера и начинает их обработку. В зависимости от наличия нужных ордеров в очередях либо совершает сделки, либо оставляет ордер в очереди на срок 4 часа. Сделка совершается по стоимости указанной в ордере, который находится в очереди. Выбор ордера удовлетворяющего пришедшему ордеру происходит с выгодой для пришедшего ордера. Данный механизм реализовывает такую особенность как «Если агент не идет ногу с рынком, то будет терять деньги». Таким образом, если агент формирует ордер, стоимость которого не позволяет реализовать его сразу, то такой ордер будет простаивать в ожидании, а реализован будет уже с выгодой для другого агента, который создаст ордер более близкий к текущим рыночным тенденциям. Агенты в случае совершения сделок через некоторое время, определяемое случайным образом, генерируют новые ордера, следуя курсу, задаваемому присвоенной стратегией поведения. Агент не может отправлять регулятору более одного ордера, и если ордер простаивает в очереди, то агент дожидается сигнала регулятора – реализация ордера или его возврат по истечении заданного интервала времени. После получения сигнала от регулятора агент возобновляет свою деятельность в соответствие с курсом стратегии поведения. 

3.2. Результаты симуляции модели с различными стартовыми параметрами

3.2.1. Сценарий №1. Стабильный рынок

Модель запущена со следующим распределением стратегий участников рынка: 16% — шумовые агенты, 7% — рационально-шумовые агенты, 77% — стабилизирующие агенты.

На рис. 2. изображен интерфейс Регулятора. Asks и Bids — массивы очередей ордеров, числа под названиями показывают количество элементов в данных массивах. Значения держатся около нуля или очень быстро обнуляются. В массив dayPrice записываются стоимости всех совершенных сделок за период вычисления среднерыночной стоимости актива, значение под ним – количество совершенных сделок за этот период. averagePrice – массив всех вычисленных среднерыночных стоимостей актива за все время работы модели и соответственно количество значений под ним. CalculateAveragePrice – таймер вычисления среднерыночной стоимости актива, в модели используется 2-х часовой период. average_Price – переменная, показывающая текущее значение среднерыночной стоимости актива. initMarketPrice – параметр показывающий начальную рыночную стоимость актива, 10 денежных единиц за единицу актива. На графике изображено изменение среднерыночной стоимости актива в течении модельного времени. В момент истечения таймера вычисляется среднее арифметическое всех значений массива dayPrice и помещает данное значение в массив averagePrice, а так же присваивает это значение переменной average_Price и удаляет все значения из массива dayPrice. Произведенные изменения со среднерыночной ценой актива фиксируются на графике в реальном времени.





Рис. 2. Пример интерфейса Регулятора в реализации сценария №1.



Последовательный анализ при симуляции работы модели по данному сценарию позволил выявить следующие ключевые особенности данного примера:

1. Количество элементов в массивах очередей ордеров равно нулю, или же быстро обнуляется при появлении новых элементов в массиве.

2. Количество сделок произведенных за период соизмеримо с количеством агентов в модели, на скриншоте их количество 910, а агентов 1000. 

Эти два наблюдения демонстрируют тот факт, что в данном абстрактом рынке происходит активная торговля, отсутствие ордеров в очереди указывает на их скорую реализацию. Поведение шумовых и рационально-шумовых агентов на данный момент не создает критических ситуаций на рынке, потому что стабилизирующие агенты обладают необходимыми массой активов и денежным капиталом для быстрого удовлетворения возникающих потребностей на рынке. За 211 часов работы модели было произведено примерно 90 тысяч сделок. Изменения стоимости актива составляют порядка 6-7% от стартового значения. Если экстраполировать такие изменения на реальный рынок, принимая, что 2 часа модельного времени соответствуют суткам реального, то при таком изменении стоимости актива (6-7%) за период более трех месяцев можно констатировать относительно стабильное поведение рынка.

В приведенном примере мы наблюдаем некоторую амплитуду колебания среднерыночной стоимости актива. Инициаторами возникновения данного явления являются рационально-шумовые в купе с шумовыми агентами. Своей общей массой они способны создать «вектор изменения» стоимости актива. Рационально-шумовые агенты готовы уцепиться за изменение стоимости и создать наплыв ордеров на покупку или продажу в Регулятор. Шумовые агенты готовы последовать за рационально-шумовыми агентами и способны усилить этот эффект. Смягчающими факторами служат стабилизирующие агенты, которые при наличии средств будут подавлять наплыв ордеров встречными ордерами, и факторы задерживающие активность шумовых агентов: интенсивность генерации ордеров, определяемая случайным экспоненциальным  распределением, и время провисания ордера в очереди(4 часа). Данные факторы сдерживают активность шумовых агентов и смягчают их давление на рынок, снижая их шансы вызвать обвал рынка. Однако, так как стратегии поведения шумовых и рационально-шумовых агентов достаточно односторонни, то, как правило, по истечении большого количества времени (более 3500 часов), их средства истощаются и они по факту выходят из игры. Оставшиеся в игре стабилизирующие агенты продолжают придерживаться вектора изменения среднерыночной стоимости актива и в силу своей довольно мягкой ценовой политики (изменение среднерыночной цены на 1% при создании ордера) и 50% распределения при случайном определении типа ордера, при отсутствии явно определенного крена потребностей рынка (ни одна из очередей ордеров явно не вырывается в лидеры по количеству элементов), не могут влиять на изменение тренда среднерыночной стоимости. Таким образом, оставшиеся стабилизирующие агенты плавно, в течение длительного времени, сводят среднерыночную стоимость к нулю.

3.2.2. Сценарий №2. Развитие пузыря и крах рынка

Модель запущена с параметрами: 10% - шумовые агенты, 18% - рационально-шумовые агенты, 72% - стабилизирующие агенты.

На рис.3 до момента времени 310 часов наблюдалась такая же картина как и в предыдущем примере. Группа шумовых и рационально-шумовых агентов вызывала колебания среднерыночной цены до момента истощения их финансовых возможностей, и их воздействие прекратилось в тот момент, когда тренд среднерыночной стоимости был возрастающий. 

Стабилизирующие агенты, имеющие на данный момент финансовые возможности, подхватили тренд и продолжили торговлю оказывая незначительное влияние на среднерыночную стоимость актива в 1%. За период 4200 модельных часов среднерыночная стоимость актива перевалила, таким образом, за 140 денежных единиц (рис. 4). Здесь сказалось такое свойство системы как замкнутость и фиксированность суммарного бюджета трейдеров. Множество стабилизирующих агентов призванных постоянно торговать оказались парализованными и не смогли этого делать. Малейшая просадка стоимости — и в игру возвращаются шумовые и рационально-шумовые агенты, которые на данный момент в силу возраставшей до этого момента среднерыночной стоимости избавились от всей наличности и имели огромную массу активов. Таким образом, в течение длительного времени относительно многочисленная группа трейдеров (28% всех агентов) находилась в ожидании изменений на рынке, позволяющих им совершать действия. Как только такие изменения произошли, они разом выходят на рынок, что незамедлительно приводит к рыночному краху.



Рис. 3. Пример интерфейса Регулятора в реализации сценария №2.





Рис. 4. «Крах» и окончание жизни модели в реализации сценария №2.



3.2.3. Сценарий №3. Краткосрочная нестабильность и крах рынка

Модель запущена с параметрами: 20% - шумовые агенты, 16% - рационально-шумовые агенты, 64% - стабилизирующие агенты.





Рис. 5. Интерфейс Регулятора в реализации сценария №3.



В 50% случаев модель едва доживает до 150 часов, в 50% случаев доживает до 700 – 1000 часов. Но исход всегда один — невозможность стабильного существования и неизбежный крах. Финансовых возможностей стабилизирующих агентов не хватает, чтобы сдерживать натиск столь большого числа шумовых и рационально-шумовых  трейдеров. Вероятно, планка стабильного существования рынка находится в районе 25%.

3.3. Перспективы и возможная дальнейшая разработка.

В ходе выполнения данной работы была построена алгоритмическая имитационная модель искусственного финансового рынка. Архитектура модели имеет блочную структуру, а, следовательно, ее дальнейшее усложнение/изменение не будет требовать больших усилий с технической стороны. Перечень возможных усложнений модели:

1. Знание фундаментальной стоимости актива. На данный момент знания о фундаментальной стоимости актива в модели отсутствуют, а агенты со стабилизирующей стратегией поведения компенсируют отсутствие агентов-фундаменталистов. Данное усложнение важный шаг в дальнейшем развитии модели.

2. Торговля несколькими видами активов. Торговля одним видом актива позволяет исследовать лишь небольшие сегменты микрорынка и наблюдать за активами, на которые не оказывает влияние общее состояние экономики и других активов. (На пример если изъять всю нефть, то очевидно, что газ резко подорожает) Данное усложнение позволит рассматривать рынок как систему, более приближенную к реальности.

3. Выплаты дивидендов по активам. На данный момент система замкнута, денежная масса в системе строго фиксирована. Однако, в на реальном рынке денежная масса не является эталоном и ее изменения тоже оказывает влияние на рынок в целом.

4. Выплаты процентов по наличным находящимся в депозите. На реальном рынке широко развит сектор банковских услуг, и игнорировать его несколько нецелесообразно. Рассмотрение банков как агентов этой системы позволит шире взглянуть на процессы протекающие в данной модели.

5. Смена стратегий поведения агентами в ходе работы модели. Совершенно очевидно, что реальные торговые агенты сами по себе представляют сложные системы, важную роль в которых играет и психологический фактор, и отсутствие владения абсолютно всей информацией. Такой подход позволит правильно рассматривать деятельность агентов в рамках реального мира.

6. Торговля различными объемами активов. Рынок состоит не из одинаковых агентов, одно из их различий – объемы, которыми они владеют. Одни агенты готовы работать в малых денежных диапазонах, другие готовы размениваться контрольными пакетами акции крупных компаний. И те, и другие оказывают свое влияние на ход рынка.

7. Расширение статистического аппарата. Представленная статистика позволяет отслеживать динамику рынка, однако, для более удобной работы и анализа необходимы и другие данные, на пример процентное соотношение типов участников в общей массе сделок.

8. Расширение множества типов стратегий поведения агентов. Представленные стратегии не охватывают всех возможных типов поведения, и даже не являются фундаментальными. Данный инструмент особенно нуждается в разработке в данном направлении.

9. Объединение нескольких микрорынков в один макрорынок. Такое усложнение механизма позволит заниматься анализом влияния микрорынков друг на друга, следить за возможным перетеканием капитала или активов. 

10. Стохастические внешние и внутренние события. Данная модель позволяет рассматривать лишь такие явления как влияние спекулятивных операций на поведение среднерыночной стоимости актива, однако, на реальном рынке происходят различные стохастические события (природные катаклизмы, информационная война и т.д. и т.п.), которые тем или иным образом влияют на рынок. Влияние этих событий не учитывать нельзя.

11. Внутренние информационные связи между агентами. В данной модели используется принцип полной информации, то есть все агенты получают всю имеющуюся информацию от Регулятора. На реальном рынке знание или не знание какой-либо информации, способы ее распространения играют достаточно важную роль.

12. Моделирование реальных статистических данных. Обладая реальными статистическими данными о поведении среднерыночной стоимости актива, а так же качественными и количественными характеристиками агентов, можно пытаться воспроизвести реальную статистику комбинируя и перебирая стратегии поведения агентов. То есть воспроизвести реально произошедшую картину и понять суть и природу произошедших событий.

Заключение

В ходе выполнения данной работы было изучено большое количество зарубежной литературы по тематике агентно-ориентированного имитационного моделирования искусственных финансовы рынков, а так же изучены язык программирования Java и среда имитационного моделирования AnyLogic. На основе существующих моделей и подходов к моделированию искусственных финансовых рынков была разработана и запрограммирована алгоритмическая имитационная модель искусственного финансового рынка, содержащая в себе агентов, обладающих шумовой, рационально-шумовой и стабилизационными стратегиями поведения.

В результате симуляции работы рынка с различными начальными параметрами были реализованы различные сценарии, демонстрирующие поведение рынка. Продемонстрированы стабильная жизнь рынка, как результат активной торговли, а также возникновения пузырей и крахов в результате самоорганизующейся подражающей активности относительно больших по численности групп трейдеров. В результате проведения экспериментов было показано, что если количество шумовых и рационально-шумовых агентов в сумме значительно превышают 25% от общего числа агентов, то жизнь рынка с очень высокой вероятностью завершается крахом.

Данная работа показывает, что такие важные явления экономической жизни, как пузыри и крахи финансовых рынков поддаются моделированию. Построенная модель в простых реализациях продемонстрировала, что пузыри и крах могут возникать в результате взаимодействия шумовых и рационально-шумовых агентов при отсутствии прочих влияющих факторов.

В результате выполнения выпускной квалификационной работы имеется алгоритмическая модель, имеющая блочную архитектуру, что позволяет с минимальными техническими затратами усложнять и усовершенствовать ее. Таким образом, создан инструмент для моделирования и имитации искусственных финансовых рынков, обладающий потенциалом в вопросе моделирования и исследования как искусственных, так и реальных финансовых рынков и особенностей их динамики.

Список использованных источников

Markowits Harry M. Portfolio Selection // Journal of Finance. 1952. 7. № 1 pp. 71-91

Sharpe, William F. (1964). Capital asset prices: A theory of market equilibrium under conditions of risk, Journal of Finance, 19 (3), 425-442

Lintner, John (1965). The valuation of risk assets and the selection of risky investments in stock portfolios and capital budgets, Review of Economics and Statistics, 47 (1), 13-37.

Fisher Black, Myron Scholes, The Pricing of Options and Corporate Liabilities, The Journal of Political Economy, Volume 81, Issue 3(May-June, 1973) pp 637-654.

Cox, J.C., J.E. Ingersoll and S.A. Ross (1985). "A Theory of the Term Structure of Interest Rates". pp 385–407.

Johansen, A. and Sornette, D.(1999) Critical crashes, Risk 12(1), 91-94

Johansen, A. Ledoit, O., and Sornette, D.(2000). Crashes as critical points, International Journal of  Theoretical and Applied Finance 3, 219-255.

Johansen, A., D. Sornette, O. Ledoit, Predicting financial crashes using discrete scale invariance, Journal of Risk 1 (1999) 5-32.

Sornette, D. A. Johansen, Significance of log-periodic precursors to financial crashes, Quantitative Finance 1 (2001) 452-471.

Sornette, D. Why Stock Markets Crash, Princeton University Press, Princeton, N.J, 2003.

Sornette, D., A. Johansen, J.-P. Bouchaud, Stock market crashes, precursors and replicas, Journal de Physique I France 6 (1996) 167-175.

Blanchard, O.J.(1979). Speculative bubbles, crashes and rational expectations, Economics Letters 3, 387-389.

Blanchard, O.J. and Watson, M.W.(1962). Bubbles, rational expectations and speculative markets, in Crisis in Economics and Financial Structure: Bubbles, Bursts, and Shocks, P Wachtel, editor(Lexington Books, Lexington, MA).

MILAN LOVRIĆ, Behavioral Finance and Agent-Based Artificial Markets Chapter 4, 41-56

A Survey of Agent Based Artificial Stock Markets, International Research Journal of Finance and Economics 64(2011), 126-139

Карпов, Ю.Г. Имитационное моделирование систем. Введение в моделирование с AnyLogic.

Bothmer, H.-C., C. Meister, Predicting critical crashes? A new restriction for the free variables, Physica A 320 (2003) 539-547.

Grech, D. and Z. Mazur, Can one make any crash prediction in finance using the local hurst exponent idea? Physica A 336 (2004) 133-145.

Приложение А. Коды некоторых функций, реализованных в модели

А1. Функция агента OrderEvent и описание ордера

В теле программы Агент оснащен одной активной функцией OrderEvent, порождающей ордер и посылающей его регулятору:



int v = strategy.getVolume(this,regulator);

if (v==0)

	orderRejected(null);

else{

	double p = strategy.getPrice(this,regulator,v);

	if (p==0)

	orderRejected(null);

	else{

		regulator.addOrder(new Order(this, v, p));

	}

}



В теле программы Ордер имеет следующее описание:



public class Order implements Comparable<Order> {

	private final Trader trader;

	private long volume;

	private final double price;

	

	public Order(Trader trader, long volume, double price) {

		this.trader = trader;

		this.volume = volume;

		this.price = price;

	}

	

	public boolean isAsk() {

		return volume > 0;

	}

	

	public Trader getTrader() {

		return trader;

	}

	

	public long getVolume() {

		return volume;

	}

	

	public double getPrice() {

		return price;

	}

	

	@Override

	public int compareTo(Order o) {

		if (isAsk())

			return o.price > price ? 1 : (o.price < price ? -1 : 0);

		else

			return o.price < price ? 1 : (o.price > price ? -1 : 0);

	}

}



А2. Функции Регулятора



В теле программы Регулятор оснащен тремя активными функциями:

1. Функция addOrder – прибытие нового ордера в регулятор:



if(order.getVolume()<0 && asks.size()!=0){

	Order o = asks.keySet().iterator().next();

	if (order.getPrice() <= o.getPrice()){

		order.getTrader().volume--;

		order.getTrader().cash=order.getTrader().cash+o.getPrice();

		o.getTrader().volume++;

		o.getTrader().cash=o.getTrader().cash-o.getPrice();

		dayPrice.add(o.getPrice());

		order.getTrader().lastPrice=o.getPrice();

		order.getTrader().orderConfirmed(null);

		o.getTrader().orderConfirmed(null);

		RefuseOrder refuseOrder = asks.remove(o);

		refuseOrder.reset();

		traceln("removing" + o);

	}

} else if(order.getVolume()>0 && bids.size()!=0){

	Order o = bids.keySet().iterator().next();

	if (order.getPrice()>=o.getPrice()){

		order.getTrader().volume++;

		order.getTrader().cash=order.getTrader().cash-o.getPrice();

		o.getTrader().volume--;

		o.getTrader().cash=o.getTrader().cash+o.getPrice();

		dayPrice.add(o.getPrice());

		order.getTrader().lastPrice=o.getPrice();

		order.getTrader().orderConfirmed(null);

		o.getTrader().orderConfirmed(null);

		RefuseOrder refuseOrder = bids.remove(o);

		refuseOrder.reset();

		traceln("removing" + o);

	}

}

else{

RefuseOrder refuseOrder = create_RefuseOrder(6, order);

if (order.getVolume() < 0)

	bids.put(order, refuseOrder);

else if (order.getVolume() > 0)

	asks.put(order, refuseOrder);

else

	throw new AssertionError();

	traceln("Zavis " + order);

}



2. Функция RefuseOrder – удаление ордера из очереди после 4 ч.:



traceln("refusing " + order);

if (order.getVolume() < 0){

		bids.remove(order);

		if (bids.remove(order)==null) {

			if (asks.containsKey(order))

				traceln("error in asks");

			throw new AssertionError();

		}		

}

else if (order.getVolume() > 0){

		asks.remove(order);

		if (asks.remove(order) == null){

			if (bids.containsKey(order))

				traceln("error in asks");

			throw new AssertionError();

			}

		}

order.getTrader().orderRejected(order);



3. Функция CalculateAveragePrice – вычисление среднерыночной стоимости актива:

int i=0;

double a=0;

while (i < dayPrice.size() ){

a=a+dayPrice.get(i);

i++;

}

if (a==0)

averagePrice.add(average_Price);

else{

averagePrice.add(a/(i+1));

average_Price=a/(i+1);}

dayPrice.clear();



А3. Описание стратегий

В теле программы интерфейс стратегии поведения описывается следующим образом:



public interface Strategy

{

	double getPrice(Trader trader, Regulator regulator,int v);

	int getVolume(Trader trader, Regulator regulator);

}



В теле программы стратегия поведения шумовых агентов описана следующим образом:



public class NoiseStrategy implements Strategy {

	private static final NoiseStrategy INSTANCE = new NoiseStrategy();

	public static NoiseStrategy getInstance() {

		return INSTANCE;

	}

	private NoiseStrategy() {

	}

	public double getPrice(Trader trader, Regulator regulator,int v) {

		double p=0.0;

		if (v>0 && regulator.asks.keySet().size()!=0)

			if (trader.cash>1.01*regulator.asks.keySet().iterator().next().getPrice())

			p=1.01*regulator.asks.keySet().iterator().next().getPrice();

		if (v<0 && regulator.bids.keySet().size()!=0)

			p=0.9999*regulator.bids.keySet().iterator().next().getPrice();

		return p;

	}

	public int getVolume(Trader trader, Regulator regulator){

		int v=0;

		if (regulator.asks.size()>regulator.bids.size())

			v=1;

		if (regulator.asks.size()<regulator.bids.size() && trader.volume>0)

			v=-1;

		if (regulator.asks.size()==regulator.bids.size())

			if (random()<=0.5) 

				v=1;

			else {

				if (trader.volume==0)

					v=0;

				else v=-1;

				}

				

		return v;

	}

}



В теле программы стратегия поведения рационально-шумовых агентов описана следующим образом:



public class RationalStrategy implements Strategy {

	private static final RationalStrategy INSTANCE = new RationalStrategy();

	public static RationalStrategy getInstance() {

		return INSTANCE;

	}

	private RationalStrategy() {

	}

	public double getPrice(Trader trader, Regulator regulator, int v) {

		double p=0.0;

		if (v>0){

			if(regulator.asks.keySet().size()!=0){

				if(trader.cash>1.01*regulator.asks.keySet().iterator().next().getPrice())

						p=1.01*regulator.asks.keySet().iterator().next().getPrice();}

			else p=regulator.average_Price;}

		if (v<0) 

			if(regulator.bids.keySet().size()!=0)

			p=0.99*regulator.bids.keySet().iterator().next().getPrice();

			else p=regulator.average_Price;

		return p;

	}

	public int getVolume(Trader trader, Regulator regulator){

		int v=0;

		if (regulator.averagePrice.get(regulator.averagePrice.size()-2)==regulator.average_Price)

			 v=1;

		if (regulator.averagePrice.get(regulator.averagePrice.size()-1)>regulator.averagePrice.get(regulator.averagePrice.size()-2))

			v=1;

		if (regulator.averagePrice.get(regulator.averagePrice.size()-1)<regulator.averagePrice.get(regulator.averagePrice.size()-2) && trader.volume>0)

			v=-1;

				return v;

	}

}

В теле программы стратегия поведения стабилизирующих агентов описана следующим образом:



public class StabilityStrategy implements Strategy {

	private static final StabilityStrategy INSTANCE = new StabilityStrategy();

	

public static StabilityStrategy getInstance() {

		return INSTANCE;

	}

	

private StabilityStrategy() {

	}

	

public double getPrice(Trader trader, Regulator regulator,int v) {

		double p=0.0;

		if (v>0 && trader.cash>1.01*regulator.average_Price)

			p=1.01*regulator.average_Price;

		if (v<0)

			p=0.99*regulator.average_Price;

		return p;

	}

	

public int getVolume(Trader trader, Regulator regulator){

		int v=0;

		if (regulator.asks.size()>regulator.bids.size() && trader.volume>0)

			v=-1;

		if (regulator.asks.size()<regulator.bids.size())

			v=1;

		if (regulator.asks.size()==regulator.bids.size())

			if (random()<=0.5) 

				v=1;

			else {

				if (trader.volume==0)

					v=0;

				else v=-1;

				}

		return v;

	}

}