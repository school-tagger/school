Правительство Российской Федерации

Федеральное государственное автономное образовательное учреждение высшего профессионального образования

«Национальный исследовательский университет 

«Высшая школа экономики»

Факультет бизнес-информатика

Отделение программной инженерии

Кафедра Управления разработкой программного обеспечения

ВЫПУСКНАЯ КВАЛИФИКАЦИОННАЯ РАБОТА

На тему: Клиент-серверная система на основе беспроводной сети стандарта IEEE 802.15.4



Листов 21





Москва, 2014

Аннотация

21 страница, 3 главы, 6 рисунков, 3 таблицы, 4 приложения

ieee 802.15.4, беспроводная сеть, модель osi, mac, zigbee, топология, lr-wpan, сенсорная сеть

Объектом исследования данной выпускной квалификационной работы является стандарт для беспроводных персональных сетей IEEE 802.15.4. Цель работы заключается в создание клиент-серверное системы демонстрирующей работу беспроводной сети стандарта IEEE 802.15.4. 

Данная работа актуальна в связи быстрым ростом внедрения систем контроля и мониторинга, которые позволяют собирать данные о состоянии механизмов, оборудования, окружающей среды и управлять различными механизмами. Одним из примеров таких систем является система «Умный дом». Стандарт IEEE 802.15.4  используется для соединения датчиков и исполнительных устройств в единую беспроводную сеть. Данный стандарт был специально разработан для этих целей и имеет все необходимые для этого характеристики: чрезвычайно низкий уровень потребления энергии и низкая стоимость монтажа и эксплуатации.

В данной работе дан обзор беспроводного стандарта IEEE 802.15.4, в котором описывается причины его возникновения и преимущества перед остальными представителями беспроводных стандартов. В статье также дано описание технических сторон стандарта и подробно описан процесс функционирования сети и взаимодействия ее участников. 

В этом документе дано описания приложения, которое было выбрано для демонстрации беспроводной сети на основе стандарта IEEE 802.15.4, сложностей, с которыми пришлось столкнуться при разработке, и методы их решения.

Результатом данной работы является реализация клиентского и серверного приложений, взаимодействующих с помощью беспроводной сети стандарта IEEE 802.15.4. В ходе работы были выявлены ограничения стандарта IEEE 802.15.4, влияющие на функционал приложений реализованных в данном проекте, но не являющиеся критичными для систем, требованиями которых являются низкое энергопотребление, низкая стоимость монтажа и обслуживания. 

В дальнейшем возможна разработка систем с более сложной сетевой топологией и реализацией различных методов маршрутизации для ретрансляции сообщений от отправителя к адресату через множество узлов.













Введение

Сегодня сложно представить нашу жизнь без беспроводных технологий. Они применяются практических во всех сферах жизнедеятельности. «В быту» мы применяем как минимум три стандарта беспроводной связи по радиоканалу: GSM как отличное средство для телефонии, WiFi для домашних и офисных сетей и Bluetooth для подключения устройств и периферии. Однако этих стандартов оказалось недостаточно для оптимального решения всех «сетевых задач». С ростом систем контроля и мониторинга появилось необходимость в новом стандарте связи, который обеспечивал бы надежную передачу данных и низкую стоимость установки и эксплуатации. Беспроводные технологии были очевидным решением данной проблемы, но все существующие стандарты имели один существенный недостаток в виде высокого энергопотребления. 

В декабре 2000 года Институт инженеров по электротехнике и электронике (IEEE – Institute of Electrical and Electronics Engineers) объявил о разработке нового стандарта связи для беспроводных персональных сетей с низким уровнем скорости (LR-WPAN – Low-Rate Wireless Personal Area Network), который называется IEEE 802.15.4.  Целью рабочей группы IEEE 802.15.4 было определение нового стандарта беспроводного соединения с низкой сложностью, невысокой стоимостью и чрезвычайно низким энергопотреблением. [3]

Стандарт IEEE 802.15.4 предназначен для приложений с невысокими требованиями к пропускной способности и латентности сети в пользу низкой стоимости и низкого энергопотребления. Эти особенности позволили найти применение систем контроля и мониторинга в промышленной, сельскохозяйственной, автомобильной, жилищной и медицинской областях, которые до этого не могли себе позволить существующие беспроводные технологии или были вынуждены использовать проприетарные решения (proprietary software).

Данная работа актуальна потому, что системы управления и мониторинга быстро набирают популярность, а стандарт IEEE 802.15.4 является лучшим решением для создания подобных проектов. Одним из примеров таких система является домашняя автоматизация или «Умный дом». Такие системы предоставляет централизованный контроль над освещением, отоплением, вентиляцией, кондиционированием, бытовой техникой, дверьми, воротами и т.д. В производстве подобные системы позволяет делать анализ состояния оборудования и обнаруживать отклонения и неисправности.

	Целью данной выпускной квалификационной работы является создание клиент-серверной системы на основе беспроводной сети стандарта IEEE 802.15.4.

Для достижения выше поставленной цели необходимо выполнить следующие задачи:

Изучить стандарт беспроводной связи IEEE 802.15.4

Построить беспроводную сеть с топологией звезда стандарта IEEE 802.15.4

Создать клиент-серверную систему для поддержки педагогического тестирования, использую беспроводную сеть

































Обзор стандарта IEEE 802.15.4

IEEE 802.15.4 — стандарт, который определяет физический слой и управление доступом к среде для беспроводных персональных сетей с низким уровнем скорости. Стандарт поддерживается рабочей группой IEEE 802.15. Является базовой основой для протокола ZigBee, который, в свою очередь, предлагает решение для построения сетей посредством постройки верхних слоёв, которые не регламентируются стандартом [6].

Основной областью применения стандарта IEEE 802.15.4 являются беспроводные сенсорные сети, акцент в которых делается на очень низкую стоимость связи с ближайшими устройствами, простую инфраструктурой или ее отсутствие, и чрезвычайно низкий уровень энергопотребления.

Стандарт имеет ряд ограничений, на которые пришлось пойти, чтобы достичь такого низкого уровня энергопотребления и низкую стоимость эксплуатации и производства. Радиус приема – около 10 метров с максимальной скоростью передачи данных 250 кбит/с. Скорость передачи может быть снижена для достижения еще более низкого уровня энергопотребления и увеличения радиуса действия (до 100 метров).

WLAN, WPAN и LR-WPAN

Беспроводные локальные сети (WLAN – Wireless Local Area Network) были созданы для высококачественных сетей передачи данных. Среди требований  беспроводной локальной сети – бесшовный роуминг, переадресация сообщений, большой радиус действия и мощность для подключения большого количества устройств. В то время как, беспроводные персональные сети (WPAN – Wireless Personal Area Network) предназначены для функционирования в личном рабочем пространстве протяженностью до 10 метров. К беспроводным локальным сетям относиться стандарт IEEE 802.11 более известный как Wi-Fi.

Рабочая группа IEEE 802.15  определила несколько классов беспроводных персональных сетей, которые были дифференцированы по скорости передачи данных, энергопотреблению и качеству обслуживания. Наиболее распространённые из них: 

IEEE 802.15.1 или Bluetooth, который используется, например, в мобильных телефонах и имеет качество обслуживание подходящее голосовых приложений;

IEEE 802.15.4, который относится к низкоскоростным беспроводным персональным сетям (LR-WPAN – Low Rate Wireless Personal Area Network) и предназначен для приложений с низкими требованиями к скорости передачи информации и качества обслуживания.

Таблица . Сравнение LR-WPAN с другими беспроводными стандартами

	В таблице 1 представлено сравнение основных характеристик низкоскоростных беспроводных персональных сетей IEEE 802.15.4 (LR-WPAN), со стандартом беспроводной персональной сети IEEE 802.15.1 (Bluetooth) и стандартом беспроводной локальной сети IEEE 802.11 (Wi-Fi).

	Как видно из таблицы 1, низкоскоростные сети стандарта IEEE 802.15.4,  предназначены для приложений, где использование Wi-Fi слишком дорого и нет необходимости в производительности, которой обладает Bluetooth.

Сетевая модель OSI

Сетевая модель OSI (Open Systems Interconnection Basic Reference Model — базовая эталонная модель взаимодействия открытых систем) — концептуальная модель, которая характеризует и стандартизирует внутренние функции коммуникационной системы, разделяя их на абстрактные уровни [7].

Модель OSI состоит из семи уровней. Любой протокол может взаимодействовать либо с протоколом своего уровня, либо с протоколами на единицу выше или ниже.



Таблица . Сетевая модель OSI [7]



Прикладной уровень – верхний уровень модели, который обеспечивает взаимодействие пользовательских приложений с сетью. 

Уровень представления преобразует данные полученные из сети в формат приложения, запросы приложения преобразует в формат для передачи по сети. Также на этом уровне может осуществляться кодирование/декодирование данных.

Сеансовый уровень отвечает за сеанс связи и поддержания взаимодействия в течении длительного времени.

Транспортный уровень предоставляет различные функции для надежной передачи данных от отправителя к адресату. 

Сетевой уровень определяет пути передачи данных. На этом уровне работает маршрутизатор. 

Канальный уровень. Спецификация IEEE 802 разделяет этот уровень на два подуровня: подуровень управления логической связью (LLC – Logical Link Layer) и подуровень управления доступом к среде передачи (MAC – Media Access Layer). 

LLC обеспечивает проверку и правильность передачи информации по соединению и выступает в качестве интерфейса между MAC и сетевым уровнем.

MAC является нижний подуровнем канального уровня и выступает в качестве интерфейса между физическим уровень и LCC. MAC обеспечивает адресацию и механизмы управления доступом к каналу.

Физический уровень – нижний уровень модели OSI, который обеспечивает передачу, данных представленных в двоичном коде, от одного устройства к другому. Осуществляет передачу электрических или оптических сигналов в кабель или в радиоэфир и, соответственно, их прием  и преобразование в биты.

Упрощенная модель OSI

Стандарт IEEE 802.15.4 определяет только два нижних уровня модели OSI: физический и MAC. Для описания остальных уровней используется спецификация разработанная альянсом ZigBee, которая определяет упрощенную пятиуровневую модель.

Таблица . Модель IEEE 802



 Модель сети

Типы узлов

Беспроводная сеть, построенная  на основе стандарта IEEE 802.15.4, включает два вида устройств: полнофункциональные устройства (FFD – Full-Function Device)  и устройства с облегченными функциями (RFD – Reduced-Function Device).  Полнофункциональные устройства могут служить в качестве координатора или маршрутизатора сети.  Устройства с облегченными функциями выступают в роли датчиков (давления, температура и т.д.) и исполнительных устройств.

Топологии

Стандарт IEEE 802.15.4 поддерживает множество видов сетевых топологий: начиная со «звезды» и заканчивая различными видами одноранговых сетей(peer-to-peer). Однако любая сеть, независимо от топологии, должна иметь один координатор. Каждое устройство в сети использует уникальный 64-битный идентификатор, который определяется координатором сети. Также в некоторых случаях может использоваться 16-битный идентификатор внутри ограниченной сети.

Сети, имеющие топологию «звезда», отлично подходят для покрытия небольших территорий, где все устройства находятся в радиус связи координатора. В такой сети все устройства взаимодействуют только с координатором. Конечные устройства тоже могут обмениваться сообщениями между собой, но только через координатор. На рисунке 1 изображена схема сети с топологией звезда.



Рисунок . Топология звезда

Стандарт IEEE 802.15.4 позволяет создавать различные виды одноранговых сетей, самым простым из которых является ячеистая топология (mesh). В такой сети передача сообщений от отправителя к получателю может осуществляться с помощью различных алгоритмов маршрутизации, поэтому нет необходимости в том, чтобы все устройства в радиусе покрытия друг друга. 



Рисунок . Ячеистая топология

Маршрутизация сообщений необязательно должна осуществляться через координатора сети, для этого можно использовать маршрутизаторы. Координатор осуществляет подключение новых устройств, генерацию уникальных идентификаторов для них и устанавливает настройки сети. На рисунке 2 изображена схема сети с ячеистой топологией.

Беспроводные сенсорные сети

Беспроводными сенсорными сетями (WSN – Wireless Sensor Network) называют распределенные, самоорганизующиеся беспроводные сети, состоящие из множества датчиков (датчиками температуры, давления, освещенности, уровня вибрации, местоположения и т. п.)  и исполнительных устройств. Такие сети позволяют подключать до 65000 устройств и могут покрывать территории площадью от нескольких квадратных метров до нескольких квадратных километров благодаря способности ретранслировать сообщения от одного устройства к другому. 

Беспроводные сенсорные сети применяются во многих отраслях (промышленной, транспортной, жилищной, охранной и т.д.) и позволяют, например:

Своевременно выявлять возможные отказы исполнительных механизмов, контролирую таких параметров, как вибрация, температура, давление и т. п.;

Контролировать доступа к удалённым системам объекта мониторинга в режиме реального времени;

Контролировать экологические параметров окружающей среды 

Беспроводными сенсорные сети являются основным направлением рабочей группы IEEE 802.15.4. 





MAC слой

Слой механизма доступа (MAC – Media Access Control) вместе со слоем управления логической связью являются подуровнями канального уровня модели OSI. MAC слой обеспечивает адресацию и механизмы управления доступом к каналам. В случае с беспроводными персональными сетями необходимо оптимально использовать беспроводную среду потому, что они работают на ограниченных нелицензированных частотах совместно с другими стандартными и нестандартными беспроводными технологиями, включая беспроводные локальные сети. Стандарт IEEE 802.15.4 использует CSMA-CA алгоритм, который требует проверять канал перед началом передачи сообщения, чтобы избежать коллизий с текущей передачей от другого сетевого устройства.

Механизм адресации

Каждому сетевому устройству во время изготовления присваивается уникальный серийный номер, который в дальнейшем используются для однозначной идентификации устройства в сети среди других сетевых устройств в мире.

Точки доступа

Обмена сообщениями между сетевыми протоколами происходит через точки доступа к услугам (SAP – Service Access Point). MAC слой предоставляет два сервиса для связи с верхними уровнями:

Объект управления уровнем MAC (MLME – MAC Layer Management Entity)

Общий MAC-уровень (MCPS – MAC common part sublayer)

Существует 4 вида сообщений:

request – запрос от верхнего слоя к MAC слою;

confirm – ответ MAC слоя на запрос верхнего слоя;

indication – сообщение от MAC слоя к верхнему слою, которое указывает на внутреннее событие слоя;

response – отправляется от верхнего слоя к MAC слою, чтобы завершить процедуру ранее вызванную примитивом indication. [4]

Взаимодействие сетевых протоколов

На устройствах передачи и приема реализованы физический и MAC уровни. На физическом уровне сетевые устройства обмениваются сообщениями через радиоканал. MAC уровень передатчика взаимодействует с MAC уровнем приложения с помощью драйвера rxtxcomm. MAC уровень приложения предоставляет функции управления средой передачи верхним слоям. На рис. 3 показана схема взаимодействия координатора сети и сетевого устройства.



Рисунок . Функционирование сети

Формирование сети



Для того чтобы сформировать сеть нужно выбрать координатор персональной сети (PAN Coordinator – Personal Area Network Coordinator). В каждой сети должен присутствовать ровно один координатор. Рисунок 4 демонстрирует формирование сети, которое начинается, когда верхний слой посылает примитив MLME-SCAN.request объекту управления уровнем MAC (MLME – MAC Management Service or MAC Layer Management Entity), запрашивая активное сканирование канала. После завершения сканирования канала результаты отсылаются обратно через примитив MLME-SCAN.confirm. Если результаты приемлемые, то верхний слой выбирает идентификатор персональной сети и отправляет примитив MLME-START.request объекту управления уровнем MAC. Примитив MLME-START.request требует MAC слой поместить идентификатор персональной сети в информационную базу персональной сети (PIB). После этого, MAC слой отправляет примитив MLME-START.confirm верхнему слою. Данное устройство становится координатором персональной сети и сеть сформирована.



Рисунок . Формирование сети

Передача сообщения

Чтобы передать сообщение другому сетевому устройству, приложение отправитель посылать запрос MCPS-DATA.request MAC слою. Запрос MCPS-DATA.request содержит сообщение, адрес получателя, длину сообщения и другие параметры. MAC слой отправителя передает сообщение по радиоканалу MAC слою получателя, который в ответ отправляет подтверждение о доставке, если оно было запрошено. MAC слой получателя отправляет сообщение верхнему слою MCPS-DATA.indication, сообщая о полученном сообщении. Рисунок 5 отображает процесс передачи сообщения от одного сетевого устройства к другому.



Рисунок . Схема передачи сообщения

Информационная база 

Атрибуты сети хранятся в информационной базе персональной сети (PIB – PAN Information Base). Для того чтобы получит значение какой-нибудь переменной из PIB, нужно отправить запрос MLME-GET на MAC уровень с ее индексом. Для изменения значение используется запрос MLME-SET.



























Клиент-серверная система

В качестве приложения для демонстрации работы беспроводной сети на основе стандарта IEEE 802.15.4 была выбрана система тестирования, состоящая из двух приложений: серверного и клиентского. На рисунке 6 изображена архитектура системы.







 Серверное приложение

Серверное приложение состоит из 3 частей:

Первая часть предназначена для работы с сетью  и позволяет создавать беспроводную сеть.

Вторая часть представляет собой таблицу результатов пройденных тестов. Есть возможность добавлять, удалять, редактировать и сортировать данные по столбцам.

Третья часть предназначена для работы с тестами. Можно создавать новые тесты, сохранять в файл или редактировать имеющиеся. Пользователь может устанавливать время для прохождения тесты. Вопросы могут быть с одним ответом, несколькими вариантами ответов или своим ответом.

Отправка теста

После заполнения формы регистрации на клиентском приложении пользователь отправляет запрос на скачивание теста на серверное приложение. Все запросы собираются в единую очередь. Отправка теста в ответ на запрос происходит в порядке FIFO.

Стандарт IEEE 802.15.4 ограничивает максимальный объем сообщения 102 байтами, поэтому для отправки сообщений большого объема необходимо разбивать их на части размером 102 байта или меньше и отправлять по очереди, а затем собирать на клиентском приложении.

Тесты хранятся в следующем формате:

<body>

<nex>4</nex> - количество вопросов в тесте

<ex1> - вопрос №1

<qt>1</qt> - тип вопроса (1 – с одним правильным ответов, 2 – с несколькими, 3 – со своим ответом)

<q>Сколько будет 3+3?</q> - вопрос

<na>2</na> - количество ответов

<a1>6</a1> - ответ номер №1

<a2>12</a2> - ответ номер №2

<ra>2</ra> - номер правильного ответа

</ex1>

<ex2>

	…

</ex2>

<ex3>

	…

</ex3>



…

</body>

Получение результатов

Сообщение с результатами тестирования также может состоять из нескольких частей, поэтому каждое поступившие сообщение проверяется на законченность. Если в начале и в конце присутствуют теги <body> и </body>, то сообщение целое и данные  о прохождении тестирования добавляются в таблицу с результатами. Если сообщение не имеет конечного тега, то сохраняется текущая часть, следующая пришедшая часть добавляется к имеющейся части и снова проверяется на законченность. Чтобы избежать ошибок во время сборки сообщений из нескольких частей, для каждого сетевого устройства сообщения хранятся и собираются отдельно.

Клиентское приложение

Клиентское приложение состоит из 4 частей:

Первое окно предназначено для работы с сетью и позволяет пользователю подключиться к серверу.

В следующем окне имеется форма регистрации для ввода данных, которая затем отправлять запрос на скачивание выбранного теста.

После того как тест будет скачан, пользователь может начать отвечать на вопросы. Тест оканчивается по истечению установленного времени или, если пользователь вручную его завершил. После завершения теста система подсчитывает набранные баллы и отправляет информацию на сервер, где она заносится в таблицу результатов.

В последней форме пользователь может увидеть набранные баллы и вернуться к форме регистрации для повторного прохождения теста. 

Отправка результата

Результаты тестирования отправляются на сервер в следующем формате:

<body>

<fio>Яхиев Иса Джабраилович</fio> - ФИО

<fac>ПИ</fac> - название факультета

<gro>471</gro> - номер группы

<tstn>1</tstn> - номер теста

<rap>5</rap> - количество правильных ответов

<ras>25</ras> - процен правильных ответов

</body>



















Использованные программные и технические средства

Для разработки клиентского и серверного приложений был выбран объектно-ориентированный язык Java, которые и среда разработки Intellij IDEA. 

Для управления MAC уровнем передатчика с MAC уровня приложения используется библиотека Meshnetics.

Для доступа к COM портам из приложения, к которым подключаются передатчики, используется библиотека RxTx.































Заключение

Результатом данной выпускной квалификационной работы является клиент-серверная система на основе беспроводной сети стандарта IEEE 802.15.4.

В ходе работы были решены следующие задачи:

Изучен стандарт беспроводной связи IEEE 802.15.4

Построена беспроводная сеть с топологией звезда стандарта IEEE 802.15.4

Создана клиент-серверная система на основе беспроводной сети.

Во время разработк были выявлены ограничения стандарта IEEE 802.15.4, на которые пришлось пойти при разработке стандарта для уменьшения энергопотребления и стоимости монтажа и обслуживания, поэтому они не являются критичными. Стандарт имеет следующие ограничения:

Максимальный размер передаваемого сообщения равен 102 байтам

Небольшая скорость передачи данных (20 – 250 кбит/с)

Маленький радиус действия сети (<10 м)

В дальнейшем возможна разработка систем с более сложной сетевой топологией и реализацией различных методов маршрутизации для ретрансляции сообщений от отправителя к адресату через множество узлов.

























Список литературы

Atmel AVR2025: IEEE 802.15.4 MAC Software Package - User Guide. Atmel Corporation, USA, 2012

IEEE 802.15.4 MAC User Guide. Atmel Corporation, USA, 2006

Jose A. Gutierrez, Edgar H. Callaway Jr., Raymond L. Barrett Jr. Low-Rate Wireless Personal Area Networks: Enabling Wireless Sensors With IEEE 802.15.4. USA, 2003

MAC external interface. 2008

Е. Баранова. IEEE 802.15.4 и его программная надстройка ZigBee. Россия, 2008.

IEEE 802.15.4. URL: 

Media Access Control. 

OSI model. URL: 

